;; gorilla-repl.fileformat = 1

;; **
;;; # Clojure implementation of sTAD
;;; 
;;; Shift + enter evaluates code. Hit ctrl+g twice in quick succession or click the menu icon (upper-right corner) for more commands ...
;;; 
;;; This implementation is developed using the **five circles** dataset.
;; **

;; @@
(ns stad
	(:require [clojure.data.csv :as csv]
	          [clojure.java.io :as io]
              [clojure.set :as set]
              [gorilla-plot.core :as gc]
              [incanter.core :as ico]
              [incanter.charts :as ich]
              [loom.graph :as lg]
              [loom.alg :as la]
              [loom.io :as li]
              [clojure.math.numeric-tower :as math]
;              [ubergraph.core :as uc]
;              [ubergraph.alg :as ua]
              [kixi.stats.core :as kc]
              [incanter.core :as ico]
              [incanter.charts :as ich]
              [incanter.stats :as is]))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; ### Setting some constants
;; **

;; @@
(def sample-size 3480)
(def sample-prob 0.1)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;stad/sample-prob</span>","value":"#'stad/sample-prob"}
;; <=

;; **
;;; #### Helper methods
;; **

;; @@
;;;;; File IO

(defn write-file [list-of-lists filename]
  (with-open [out-data (io/writer filename)]
    (csv/write-csv out-data list-of-lists)))

;(defn create-tulip-csv [graph prefix]
;  (with-open [out-data (io/writer (str "output/" prefix "_nodes.csv"))]
;    (csv/write-csv out-data (lg/nodes graph))))


;;;;; Other

(defn round
  "Round a double to the given precision (number of significant digits)"
  [precision d]
  (let [factor (Math/pow 10 precision)]
    (/ (Math/round (* d factor)) factor)))

(defn bin [n-bins xs]
  (let [min-x    (apply min xs)
        max-x    (apply max xs)
        range-x  (- max-x min-x)
        bin-fn   (fn [x]
                   (-> x
                       (- min-x)
                       (/ range-x)
                       (* n-bins)
                       (int)
                       (min (dec n-bins))))]
    (map bin-fn xs)))

(defn keyword2id [kw]
  (Integer/parseInt (clojure.string/replace (str kw) #":n" "")))

(defn id2keyword [i]
  (keyword (str "n" i)))

;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;stad/id2keyword</span>","value":"#'stad/id2keyword"}
;; <=

;; **
;;; ## 1. Load data
;;; 
;;; Loading all data. Result will be an array of maps:
;;; ```
;;; ({:id 1, :x 103, :y 993, :hex "1F9F88", :hue 169}
;;;  {:id 2, :x 399, :y 550, :hex "27808E", :hue 188}
;;;  {:id 3, :x 388, :y 570, :hex "297B8E", :hue 191}
;;;  ...)
;;; ```
;; **

;; @@
(defn csv-data->maps [csv-data]
  (map zipmap
       (->> (first csv-data) ;; First row is the header
            (map keyword) ;; Drop if you want string keys instead
            repeat)
	  (rest csv-data)))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;stad/csv-data-&gt;maps</span>","value":"#'stad/csv-data->maps"}
;; <=

;; @@
;;; five circles
;(def raw-data (with-open [reader (io/reader "data/five_circles.csv")]
;	(doall
;      	(csv-data->maps (csv/read-csv reader)))))
;(def data
;  (->> raw-data
;       (map #(assoc % :x (Integer/parseInt (:x %))))
;       (map #(assoc % :y (Integer/parseInt (:y %))))
;       (map #(assoc % :hue (Integer/parseInt (:hue %))))
;       (map #(assoc % :id (Integer/parseInt (:id %))))
;       (random-sample sample-prob)))

;;; horse
(def raw-data (with-open [reader (io/reader "data/horse.csv")]
	(doall
      	(csv-data->maps (csv/read-csv reader)))))
(def data
  (->> raw-data
       (map #(assoc % :x (Float/parseFloat (:x %))))
       (map #(assoc % :y (Float/parseFloat (:y %))))
       (map #(assoc % :z (Float/parseFloat (:z %))))
       (random-sample sample-prob)))

;;; simulated
;(def raw-data (with-open [reader (io/reader "data/sim.csv")]
;	(doall
;      	(csv-data->maps (csv/read-csv reader)))))
;(def data
;  (->> raw-data
;       (map #(assoc % :x (Integer/parseInt (:x %))))
;       (map #(assoc % :y (Integer/parseInt (:y %))))
;       (random-sample sample-prob)))

;;;

(clojure.pprint/pprint (take 5 data))
;; @@
;; ->
;;; ({:x -0.0135623, :y 0.59686, :z -0.379364}
;;;  {:x -0.005967, :y 0.604354, :z -0.378213}
;;;  {:x -0.0621923, :y 0.576118, :z -0.350518}
;;;  {:x -0.00935426, :y 0.626913, :z -0.235423}
;;;  {:x -0.0399703, :y 0.61752, :z -0.288702})
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; @@
;;; Five circles
;(gc/list-plot (partition 2 (interleave (map :x data) (map :y data))) :symbol-size 20)

;;; Horse
(gc/list-plot (partition 2 (interleave (map :z data) (map :y data))) :symbol-size 10)

;;; Simulated data
;(gc/list-plot (partition 2 (interleave (map :x data) (map :y data))) :symbol-size 20)


;; @@
;; =>
;;; {"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"top":10,"left":55,"bottom":40,"right":10},"data":[{"name":"504e4fe1-2fae-4645-a611-f6558c7dfba9","values":[{"x":-0.379364013671875,"y":0.5968599915504456},{"x":-0.37821298837661743,"y":0.6043540239334106},{"x":-0.35051798820495605,"y":0.576117992401123},{"x":-0.2354229986667633,"y":0.6269130110740662},{"x":-0.28870201110839844,"y":0.6175199747085571},{"x":-0.2846820056438446,"y":0.6103829741477966},{"x":-0.3440150022506714,"y":0.39500701427459717},{"x":-0.12887799739837646,"y":0.3670699894428253},{"x":-0.18118800222873688,"y":0.5011450052261353},{"x":-0.16607999801635742,"y":0.5917760133743286},{"x":-0.3648320138454437,"y":0.6023979783058167},{"x":-0.3700549900531769,"y":0.6058030128479004},{"x":-0.30772098898887634,"y":0.6082890033721924},{"x":-0.3579089939594269,"y":0.38472500443458557},{"x":-0.3736039996147156,"y":0.42364099621772766},{"x":-0.37970298528671265,"y":0.42377400398254395},{"x":-0.3863529860973358,"y":0.5514000058174133},{"x":-0.15690399706363678,"y":0.49636900424957275},{"x":-0.1535699963569641,"y":0.5146819949150085},{"x":-0.18516400456428528,"y":0.4609200060367584},{"x":-0.192440003156662,"y":0.46204501390457153},{"x":-0.18004100024700165,"y":0.5501790046691895},{"x":-0.12702499330043793,"y":0.4051569998264313},{"x":-0.3029550015926361,"y":0.5984500050544739},{"x":-0.20791000127792358,"y":0.42127299308776855},{"x":-0.22149400413036346,"y":0.5376600027084351},{"x":-0.3084770143032074,"y":0.5458049774169922},{"x":-0.19159400463104248,"y":0.5569049715995789},{"x":-0.2068839967250824,"y":0.4865640103816986},{"x":-0.3628619909286499,"y":0.5242509841918945},{"x":-0.2705189883708954,"y":0.6250579953193665},{"x":-0.26180300116539,"y":0.6137329936027527},{"x":-0.36289000511169434,"y":0.606715977191925},{"x":-0.3519439995288849,"y":0.39229100942611694},{"x":-0.13036499917507172,"y":0.35874301195144653},{"x":-0.1744309961795807,"y":0.49980899691581726},{"x":-0.17865599691867828,"y":0.4808900058269501},{"x":-0.18568499386310577,"y":0.4820440113544464},{"x":-0.14496900141239166,"y":0.569225013256073},{"x":-0.15212899446487427,"y":0.597009003162384},{"x":-0.20433999598026276,"y":0.613752007484436},{"x":-0.3344390094280243,"y":0.3895539939403534},{"x":-0.36384499073028564,"y":0.607168972492218},{"x":-0.31037500500679016,"y":0.6142650246620178},{"x":-0.21076500415802002,"y":0.3959360122680664},{"x":-0.21066899597644806,"y":0.39431899785995483},{"x":-0.3628059923648834,"y":0.5960789918899536},{"x":-0.34677600860595703,"y":0.6092320084571838},{"x":-0.1569020003080368,"y":0.4963510036468506},{"x":-0.1782130002975464,"y":0.5220670104026794},{"x":-0.17807699739933014,"y":0.5671700239181519},{"x":-0.32394900918006897,"y":0.5896180272102356},{"x":-0.21557100117206573,"y":0.422093003988266},{"x":-0.20639200508594513,"y":0.5835379958152771},{"x":-0.20425300300121307,"y":0.5329930186271667},{"x":-0.3628639876842499,"y":0.5242369771003723},{"x":-0.053996700793504715,"y":0.5808699727058411},{"x":0.007158290129154921,"y":0.5260769724845886},{"x":0.03476160019636154,"y":0.37798500061035156},{"x":-0.020892899483442307,"y":0.33123600482940674},{"x":-0.007397000212222338,"y":0.3585110008716583},{"x":-0.008879969827830791,"y":0.3893829882144928},{"x":-0.10103800147771835,"y":0.5568230152130127},{"x":-0.026837699115276337,"y":0.5262179970741272},{"x":-0.026971999555826187,"y":0.5842360258102417},{"x":-0.0026413099840283394,"y":0.548691987991333},{"x":-0.11199399828910828,"y":0.5854870080947876},{"x":-0.02152240090072155,"y":0.5071669816970825},{"x":0.20827099680900574,"y":0.5593730211257935},{"x":0.19740599393844604,"y":0.5518500208854675},{"x":0.056121401488780975,"y":0.6342589855194092},{"x":2.5757000548765063E-4,"y":0.6165500283241272},{"x":0.04538499936461449,"y":0.6351590156555176},{"x":0.02455429919064045,"y":0.6247929930686951},{"x":0.23505699634552002,"y":0.48141399025917053},{"x":0.1651179939508438,"y":0.5676800012588501},{"x":0.07786630094051361,"y":0.6235100030899048},{"x":0.2370239943265915,"y":0.4678010046482086},{"x":0.14543700218200684,"y":0.5660690069198608},{"x":0.18957500159740448,"y":0.5387129783630371},{"x":0.03446890041232109,"y":0.590391993522644},{"x":0.03564099967479706,"y":0.5298539996147156},{"x":0.07262379676103592,"y":0.34832900762557983},{"x":0.07122209668159485,"y":0.39073899388313293},{"x":0.1876399964094162,"y":0.3718770146369934},{"x":0.1745939999818802,"y":0.36755499243736267},{"x":0.19383500516414642,"y":0.37730100750923157},{"x":0.050770699977874756,"y":0.4561460018157959},{"x":0.1510169953107834,"y":0.3638870120048523},{"x":0.2247830033302307,"y":0.4093180000782013},{"x":0.21147899329662323,"y":0.4216879904270172},{"x":0.22075800597667694,"y":0.49581998586654663},{"x":0.05549800023436546,"y":0.6074720025062561},{"x":0.20107999444007874,"y":0.3910509943962097},{"x":0.2281540036201477,"y":0.4384489953517914},{"x":0.23425599932670593,"y":0.4482460021972656},{"x":0.08267460018396378,"y":0.3925510048866272},{"x":0.07183810323476791,"y":0.42481499910354614},{"x":0.19209200143814087,"y":0.49927300214767456},{"x":0.23483599722385406,"y":0.46579301357269287},{"x":0.14980100095272064,"y":0.3661389946937561},{"x":0.14070400595664978,"y":0.36345401406288147},{"x":0.09752540290355682,"y":0.3518790006637573},{"x":0.22565899789333344,"y":0.43148401379585266},{"x":0.18930700421333313,"y":0.479077011346817},{"x":0.13307499885559082,"y":0.4807780086994171},{"x":0.08912429958581924,"y":0.5085170269012451},{"x":0.12700699269771576,"y":0.44565099477767944},{"x":0.08028329908847809,"y":0.4167029857635498},{"x":0.07480250298976898,"y":0.4653699994087219},{"x":0.21665500104427338,"y":0.5543980002403259},{"x":0.2356799989938736,"y":0.49699801206588745},{"x":0.02197510004043579,"y":0.62711501121521},{"x":0.02461180090904236,"y":0.6247239708900452},{"x":0.043290600180625916,"y":0.6376399993896484},{"x":0.07209520041942596,"y":0.6274539828300476},{"x":0.1739410012960434,"y":0.5367109775543213},{"x":0.05994730070233345,"y":0.5622119903564453},{"x":0.035554200410842896,"y":0.5297930240631104},{"x":0.12710200250148773,"y":0.35594698786735535},{"x":0.0725812017917633,"y":0.34830498695373535},{"x":0.19344699382781982,"y":0.3775370121002197},{"x":0.13388299942016602,"y":0.35903701186180115},{"x":0.19373999536037445,"y":0.3772589862346649},{"x":0.21267400681972504,"y":0.3901050090789795},{"x":0.0436100997030735,"y":0.49477899074554443},{"x":0.04034779965877533,"y":0.510125994682312},{"x":0.2157990038394928,"y":0.4359630048274994},{"x":0.22078299522399902,"y":0.41172298789024353},{"x":0.226623997092247,"y":0.43195098638534546},{"x":0.07508739829063416,"y":0.5359429717063904},{"x":0.06754080206155777,"y":0.6159849762916565},{"x":0.2226489931344986,"y":0.4258599877357483},{"x":0.08855170011520386,"y":0.3665989935398102},{"x":0.06800819933414459,"y":0.4392000138759613},{"x":0.08354289829730988,"y":0.34923601150512695},{"x":0.051544301211833954,"y":0.5104950070381165},{"x":0.217631995677948,"y":0.41431599855422974},{"x":0.17313000559806824,"y":0.49665600061416626},{"x":0.14384299516677856,"y":0.4914419949054718},{"x":0.08899030089378357,"y":0.508437991142273},{"x":0.10212499648332596,"y":0.5186640024185181},{"x":0.1469690054655075,"y":0.3598310053348541},{"x":0.1978680044412613,"y":0.42164599895477295},{"x":0.1746000051498413,"y":0.4063810110092163},{"x":0.16326600313186646,"y":0.40891799330711365},{"x":0.14333300292491913,"y":0.42353999614715576},{"x":0.0926072970032692,"y":0.4339190125465393},{"x":0.08771780133247375,"y":0.42218300700187683},{"x":0.08273009955883026,"y":0.4065989851951599},{"x":0.14514200389385223,"y":0.22480399906635284},{"x":0.12363500148057938,"y":0.22364699840545654},{"x":0.15654000639915466,"y":0.22651700675487518},{"x":0.14574800431728363,"y":0.224481001496315},{"x":0.12398499995470047,"y":0.22332200407981873},{"x":0.11764100193977356,"y":0.22342300415039062},{"x":0.12213700264692307,"y":0.31455498933792114},{"x":0.14452199637889862,"y":0.3209809958934784},{"x":0.16942700743675232,"y":0.33965998888015747},{"x":0.16340400278568268,"y":0.30254799127578735},{"x":0.1528339982032776,"y":0.31780898571014404},{"x":0.12195800244808197,"y":0.2882370054721832},{"x":0.12436199933290482,"y":0.2620829939842224},{"x":0.10651600360870361,"y":0.30730900168418884},{"x":0.16692499816417694,"y":0.29795101284980774},{"x":0.16481700539588928,"y":0.2711780071258545},{"x":0.16133299469947815,"y":0.2520340085029602},{"x":0.17056499421596527,"y":0.35990598797798157},{"x":0.0988100990653038,"y":0.34042900800704956},{"x":0.1779329925775528,"y":0.3553430140018463},{"x":0.111845001578331,"y":0.08790220320224762},{"x":0.15021899342536926,"y":0.10031300038099289},{"x":0.1424809992313385,"y":0.09689450263977051},{"x":0.14180099964141846,"y":0.08913149684667587},{"x":0.11841899901628494,"y":0.0877557024359703},{"x":0.10819800198078156,"y":0.0904397964477539},{"x":0.10708100348711014,"y":0.09023399651050568},{"x":0.10704100131988525,"y":0.08837360143661499},{"x":0.1071769967675209,"y":0.09892699867486954},{"x":0.14435599744319916,"y":0.11092100292444229},{"x":0.14312100410461426,"y":0.11244100332260132},{"x":0.14281900227069855,"y":0.14986200630664825},{"x":0.13065800070762634,"y":0.11974900215864182},{"x":0.13741900026798248,"y":0.11986500024795532},{"x":0.14228299260139465,"y":0.16892899572849274},{"x":0.14350099861621857,"y":0.1197350025177002},{"x":0.11970800161361694,"y":0.16898199915885925},{"x":0.11061199754476547,"y":0.11493399739265442},{"x":0.12137600034475327,"y":0.18642200529575348},{"x":0.15051299333572388,"y":0.1659349948167801},{"x":0.12645000219345093,"y":0.04672510176897049},{"x":0.10903099924325943,"y":0.03823870047926903},{"x":0.13631799817085266,"y":0.0818587988615036},{"x":0.11676599830389023,"y":0.06737600266933441},{"x":0.14295600354671478,"y":0.06856220215559006},{"x":0.11505000293254852,"y":0.06690560281276703},{"x":0.14001299440860748,"y":0.07637619972229004},{"x":0.14301399886608124,"y":0.045849401503801346},{"x":0.11864600330591202,"y":0.013721000403165817},{"x":0.12120000272989273,"y":0.013284499756991863},{"x":0.12165199965238571,"y":0.011718500405550003},{"x":0.17604100704193115,"y":0.016446499153971672},{"x":0.1271899938583374,"y":0.03218749910593033},{"x":0.1544950008392334,"y":0.04473720118403435},{"x":0.1519470065832138,"y":0.013921099714934826},{"x":0.1382029950618744,"y":0.3578130006790161},{"x":0.11448299884796143,"y":0.3535420000553131},{"x":0.18160100281238556,"y":0.37254598736763},{"x":0.0910705029964447,"y":0.3840459883213043},{"x":0.163332000374794,"y":0.3774920105934143},{"x":0.17501099407672882,"y":0.4170919954776764},{"x":0.09977039694786072,"y":0.3531930148601532},{"x":0.09941469877958298,"y":0.35371801257133484},{"x":0.09274750202894211,"y":0.4339970052242279},{"x":0.11209200322628021,"y":0.4111280143260956},{"x":0.09885060042142868,"y":0.4163379967212677},{"x":0.14511099457740784,"y":0.22474299371242523},{"x":0.12403500080108643,"y":0.2164289951324463},{"x":0.15712399780750275,"y":0.21400000154972076},{"x":0.11578299850225449,"y":0.22361299395561218},{"x":0.1178629994392395,"y":0.22370199859142303},{"x":0.16399900615215302,"y":0.2278670072555542},{"x":0.11132899671792984,"y":0.3101649880409241},{"x":0.14930200576782227,"y":0.3427659869194031},{"x":0.1421159952878952,"y":0.2692359983921051},{"x":0.1422940045595169,"y":0.31556999683380127},{"x":0.1487099975347519,"y":0.3327670097351074},{"x":0.14457499980926514,"y":0.2948879897594452},{"x":0.13345900177955627,"y":0.29190298914909363},{"x":0.14541199803352356,"y":0.24855700135231018},{"x":0.11048199981451035,"y":0.28536099195480347},{"x":0.10328999906778336,"y":0.3259719908237457},{"x":0.1613049954175949,"y":0.252036988735199},{"x":0.10615900158882141,"y":0.3078089952468872},{"x":0.10250300168991089,"y":0.3265860080718994},{"x":0.16400399804115295,"y":0.24038000404834747},{"x":0.13329799473285675,"y":0.34280601143836975},{"x":0.1640769988298416,"y":0.36024099588394165},{"x":0.11291199922561646,"y":0.353303998708725},{"x":0.10356099903583527,"y":0.3447510004043579},{"x":0.13138499855995178,"y":0.08837489783763885},{"x":0.14968200027942657,"y":0.08977580070495605},{"x":0.11841599643230438,"y":0.08775989711284637},{"x":0.10809800028800964,"y":0.08834300190210342},{"x":0.11291900277137756,"y":0.10213399678468704},{"x":0.13065899908542633,"y":0.11978600174188614},{"x":0.1530729979276657,"y":0.19623500108718872},{"x":0.15534299612045288,"y":0.20332999527454376},{"x":0.13484600186347961,"y":0.16954800486564636},{"x":0.1480019986629486,"y":0.16716599464416504},{"x":0.125218003988266,"y":0.13158899545669556},{"x":0.15531399846076965,"y":0.18314099311828613},{"x":0.11868099868297577,"y":0.16894599795341492},{"x":0.1182510033249855,"y":0.2090580016374588},{"x":0.16016000509262085,"y":0.19435100257396698},{"x":0.1566230058670044,"y":0.1826460063457489},{"x":0.14626100659370422,"y":0.1323309987783432},{"x":0.11864099651575089,"y":0.11510799825191498},{"x":0.12500399351119995,"y":0.16894599795341492},{"x":0.12684600055217743,"y":0.18641799688339233},{"x":0.1118059977889061,"y":0.038946300745010376},{"x":0.15197600424289703,"y":0.04662590101361275},{"x":0.12552599608898163,"y":0.03962479904294014},{"x":0.11701299995183945,"y":0.04407170042395592},{"x":0.14849799871444702,"y":0.05067779868841171},{"x":0.14850999414920807,"y":0.05096970126032829},{"x":0.11206299811601639,"y":0.03772599995136261},{"x":0.15245899558067322,"y":0.04775090143084526},{"x":0.13019399344921112,"y":0.08213579654693604},{"x":0.11676999926567078,"y":0.06739919632673264},{"x":0.14285600185394287,"y":0.07679229974746704},{"x":0.12367399781942368,"y":0.06784719973802567},{"x":0.13981999456882477,"y":0.06883809715509415},{"x":0.11755000054836273,"y":0.06729009747505188},{"x":0.1449660062789917,"y":0.07662670314311981},{"x":0.10779199749231339,"y":0.08385270088911057},{"x":0.14885400235652924,"y":0.044956400990486145},{"x":0.14301399886608124,"y":0.04587769880890846},{"x":0.11219500005245209,"y":0.0367899015545845},{"x":0.10887599736452103,"y":0.03596090152859688},{"x":0.11219900101423264,"y":0.035428598523139954},{"x":0.14975599944591522,"y":0.043582599610090256},{"x":0.1557929962873459,"y":0.04587800055742264},{"x":0.14333100616931915,"y":0.03350989893078804},{"x":0.16513800621032715,"y":0.027342699468135834},{"x":0.17129500210285187,"y":0.0317624993622303},{"x":0.12138999998569489,"y":0.016618000343441963},{"x":0.17925700545310974,"y":0.021520700305700302},{"x":0.12183800339698792,"y":0.016637099906802177},{"x":0.12301599979400635,"y":0.011407299898564816},{"x":0.1502310037612915,"y":0.01321479957550764},{"x":0.13253000378608704,"y":0.012057599611580372},{"x":0.11434599757194519,"y":0.030079200863838196},{"x":0.11008699983358383,"y":0.03086489997804165},{"x":0.14427199959754944,"y":0.04413849860429764},{"x":0.15405499935150146,"y":0.04276749864220619},{"x":0.16047300398349762,"y":0.015327200293540955},{"x":0.1050570011138916,"y":0.652076005935669},{"x":0.27083098888397217,"y":0.5805180072784424},{"x":0.24695399403572083,"y":0.6052049994468689},{"x":0.11271599680185318,"y":0.6794260144233704},{"x":0.2068289965391159,"y":0.6424499750137329},{"x":0.19894999265670776,"y":0.6494240164756775},{"x":0.2578360140323639,"y":0.5339409708976746},{"x":0.13449500501155853,"y":0.6625639796257019},{"x":0.18168200552463531,"y":0.7029410004615784},{"x":0.2623319923877716,"y":0.5872650146484375},{"x":0.23611100018024445,"y":0.6165739893913269},{"x":0.11274000257253647,"y":0.6793609857559204},{"x":0.11270099878311157,"y":0.6793370246887207},{"x":0.24199099838733673,"y":0.7375959753990173},{"x":0.33589500188827515,"y":0.7330989837646484},{"x":0.2948940098285675,"y":0.6459500193595886},{"x":0.2631109952926636,"y":0.6753100156784058},{"x":0.21184000372886658,"y":0.7232940196990967},{"x":0.27142998576164246,"y":0.6658920049667358},{"x":0.28249499201774597,"y":0.7319579720497131},{"x":0.2596449851989746,"y":0.7158629894256592},{"x":0.24907399713993073,"y":0.7649589776992798},{"x":0.24554400146007538,"y":0.767067015171051},{"x":0.2267870008945465,"y":0.7524319887161255},{"x":0.2177090048789978,"y":0.762582004070282},{"x":0.2966940104961395,"y":0.7265869975090027},{"x":0.2927060127258301,"y":0.7291669845581055},{"x":0.3181830048561096,"y":0.6898279786109924},{"x":0.32268598675727844,"y":0.7170869708061218},{"x":0.1882530003786087,"y":0.7500699758529663},{"x":0.29499199986457825,"y":0.6458500027656555},{"x":0.2865389883518219,"y":0.6506580114364624},{"x":0.2722960114479065,"y":0.665336012840271},{"x":0.2870439887046814,"y":0.6870920062065125},{"x":0.24584899842739105,"y":0.7667800188064575},{"x":0.2192469984292984,"y":0.7607010006904602},{"x":0.23387999832630157,"y":0.7448620200157166},{"x":0.18823499977588654,"y":0.7500399947166443},{"x":0.39491701126098633,"y":0.8264089822769165},{"x":0.47387799620628357,"y":0.8076210021972656},{"x":0.4548789858818054,"y":0.8045269846916199},{"x":0.4404590129852295,"y":0.803180992603302},{"x":0.4825339913368225,"y":0.8091679811477661},{"x":0.4821780025959015,"y":0.8064799904823303},{"x":0.453218013048172,"y":0.8427119851112366},{"x":0.4496619999408722,"y":0.8437439799308777},{"x":0.4617219865322113,"y":0.839102029800415},{"x":0.45462799072265625,"y":0.8437250256538391},{"x":0.32113999128341675,"y":0.8429840207099915},{"x":0.46286100149154663,"y":0.8357059955596924},{"x":0.4569630026817322,"y":0.8500229716300964},{"x":0.46127501130104065,"y":0.8484780192375183},{"x":0.3429949879646301,"y":0.8450319766998291},{"x":0.3366349935531616,"y":0.861361026763916},{"x":0.32938000559806824,"y":0.8575500249862671},{"x":0.3249259889125824,"y":0.8486850261688232},{"x":0.34338700771331787,"y":0.8529919981956482},{"x":0.33334800601005554,"y":0.8589739799499512},{"x":0.32748401165008545,"y":0.851839005947113},{"x":0.33018800616264343,"y":0.856357991695404},{"x":0.33647099137306213,"y":0.8409510254859924},{"x":0.32463300228118896,"y":0.8431349992752075},{"x":0.32582300901412964,"y":0.8471819758415222},{"x":0.24715900421142578,"y":0.8210110068321228},{"x":0.4691399931907654,"y":0.7923759818077087},{"x":0.4446519911289215,"y":0.7899600267410278},{"x":0.4150089919567108,"y":0.7802330255508423},{"x":0.3767459988594055,"y":0.7643300294876099},{"x":0.3652139902114868,"y":0.7585319876670837},{"x":0.44005000591278076,"y":0.7916820049285889},{"x":0.37236499786376953,"y":0.7659350037574768},{"x":0.3327440023422241,"y":0.7429270148277283},{"x":0.3287560045719147,"y":0.7389540076255798},{"x":0.3048720061779022,"y":0.7699630260467529},{"x":0.2843550145626068,"y":0.8357440233230591},{"x":0.4330520033836365,"y":0.7981939911842346},{"x":0.37766799330711365,"y":0.7728549838066101},{"x":0.3294360041618347,"y":0.7780100107192993},{"x":0.3073349893093109,"y":0.7865539789199829},{"x":0.4523020088672638,"y":0.8095669746398926},{"x":0.4721989929676056,"y":0.8103560209274292},{"x":0.4723230004310608,"y":0.8362650275230408},{"x":0.3919529914855957,"y":0.7987239956855774},{"x":0.42691099643707275,"y":0.8028590083122253},{"x":0.43989598751068115,"y":0.8378090262413025},{"x":0.41502100229263306,"y":0.8397619724273682},{"x":0.3548629879951477,"y":0.8396720290184021},{"x":0.33365100622177124,"y":0.8376089930534363},{"x":0.29738399386405945,"y":0.8356710076332092},{"x":0.3017820119857788,"y":0.8588749766349792},{"x":0.3210200071334839,"y":0.8559139966964722},{"x":0.33028799295425415,"y":0.8638349771499634},{"x":0.34582701325416565,"y":0.8492239713668823},{"x":0.344525009393692,"y":0.8448749780654907},{"x":0.4712879955768585,"y":0.8029450178146362},{"x":0.46821698546409607,"y":0.7990270256996155},{"x":0.43985500931739807,"y":0.7858319878578186},{"x":0.465939998626709,"y":0.7882570028305054},{"x":0.46369799971580505,"y":0.8084319829940796},{"x":0.4295620024204254,"y":0.802200973033905},{"x":0.4607349932193756,"y":0.80451899766922},{"x":0.4710089862346649,"y":0.8051750063896179},{"x":0.2592320144176483,"y":0.8471919894218445},{"x":0.3257429897785187,"y":0.8689900040626526},{"x":0.4808489978313446,"y":0.8128460049629211},{"x":0.37431100010871887,"y":0.8631939888000488},{"x":0.27643999457359314,"y":0.8537520170211792},{"x":0.27410098910331726,"y":0.8449329733848572},{"x":0.2759769856929779,"y":0.8647310137748718},{"x":0.2577019929885864,"y":0.8733909726142883},{"x":0.26104098558425903,"y":0.860834002494812},{"x":0.269571989774704,"y":0.8738440275192261},{"x":0.26699399948120117,"y":0.8806610107421875},{"x":0.25769200921058655,"y":0.8892080187797546},{"x":0.2650580108165741,"y":0.8920300006866455},{"x":0.2661539912223816,"y":0.891169011592865},{"x":0.2586919963359833,"y":0.8829240202903748},{"x":0.25972598791122437,"y":0.8935179710388184},{"x":0.2612139880657196,"y":0.8939279913902283},{"x":0.2594749927520752,"y":0.8974639773368835},{"x":0.46428099274635315,"y":0.8130530118942261},{"x":0.4529719948768616,"y":0.8115739822387695},{"x":0.48010000586509705,"y":0.8255890011787415},{"x":0.4802039861679077,"y":0.8258619904518127},{"x":0.4544849991798401,"y":0.8533350229263306},{"x":0.4434159994125366,"y":0.8553929924964905},{"x":0.4390459954738617,"y":0.8557950258255005},{"x":0.47454699873924255,"y":0.8330770134925842},{"x":0.47464999556541443,"y":0.8333150148391724},{"x":0.44045600295066833,"y":0.8006849884986877},{"x":0.36921900510787964,"y":0.7782109975814819},{"x":0.3808409869670868,"y":0.7931979894638062},{"x":0.3785119950771332,"y":0.8039339780807495},{"x":0.4770300090312958,"y":0.8303809762001038},{"x":0.4726029932498932,"y":0.8367819786071777},{"x":0.3367229998111725,"y":0.8706889748573303},{"x":0.4584360122680664,"y":0.7862269878387451},{"x":0.42472198605537415,"y":0.8082789778709412},{"x":0.47679999470710754,"y":0.8272749781608582},{"x":0.4051330089569092,"y":0.8166040182113647},{"x":0.32504600286483765,"y":0.850488007068634},{"x":0.3233279883861542,"y":0.8390560150146484},{"x":0.32950401306152344,"y":0.8383370041847229},{"x":0.35324200987815857,"y":0.8511790037155151},{"x":0.2593800127506256,"y":0.8974429965019226},{"x":0.25872600078582764,"y":0.8976849913597107},{"x":0.34003499150276184,"y":0.7569829821586609},{"x":0.2610189914703369,"y":0.8396080136299133},{"x":0.28321799635887146,"y":0.7933639883995056},{"x":0.4784820079803467,"y":0.7974680066108704},{"x":0.44789499044418335,"y":0.8544740080833435},{"x":0.4837850034236908,"y":0.8135049939155579},{"x":0.47547298669815063,"y":0.7947859764099121},{"x":0.34007400274276733,"y":0.8514919877052307},{"x":0.33666500449180603,"y":0.8556039929389954},{"x":0.3302290141582489,"y":0.8569419980049133},{"x":0.3233239948749542,"y":0.8391770124435425},{"x":0.3025420010089874,"y":0.869720995426178},{"x":0.315189003944397,"y":0.8735700249671936},{"x":0.24397200345993042,"y":0.7869750261306763},{"x":0.24856099486351013,"y":0.7834770083427429},{"x":0.2584739923477173,"y":0.7772499918937683},{"x":0.2712920010089874,"y":0.7903689742088318},{"x":0.27940699458122253,"y":0.7726389765739441},{"x":0.23261100053787231,"y":0.7951920032501221},{"x":0.24661600589752197,"y":0.8409519791603088},{"x":0.27307701110839844,"y":0.869933009147644},{"x":0.24034899473190308,"y":0.8060399889945984},{"x":0.23791900277137756,"y":0.8077009916305542},{"x":0.2912519872188568,"y":0.8748120069503784},{"x":0.2582570016384125,"y":0.8571339845657349},{"x":0.2650989890098572,"y":0.8630899786949158},{"x":0.2530519962310791,"y":0.8516960144042969},{"x":0.2731899917125702,"y":0.8698430061340332},{"x":0.4367859959602356,"y":0.8019229769706726},{"x":0.4453440010547638,"y":0.8034589886665344},{"x":0.46278899908065796,"y":0.8053680062294006},{"x":0.44544199109077454,"y":0.8034330010414124},{"x":0.4479990005493164,"y":0.8038120269775391},{"x":0.4791809916496277,"y":0.8058590292930603},{"x":0.320250004529953,"y":0.8475170135498047},{"x":0.46380099654197693,"y":0.8355770111083984},{"x":0.467629998922348,"y":0.835972011089325},{"x":0.4706070125102997,"y":0.8381410241127014},{"x":0.4694119989871979,"y":0.841867983341217},{"x":0.4529919922351837,"y":0.8403019905090332},{"x":0.3422580063343048,"y":0.8575400114059448},{"x":0.32877299189567566,"y":0.838358998298645},{"x":0.33980798721313477,"y":0.8390859961509705},{"x":0.34446701407432556,"y":0.8439350128173828},{"x":0.3391149938106537,"y":0.8580359816551208},{"x":0.3432219922542572,"y":0.8436239957809448},{"x":0.34568101167678833,"y":0.8476049900054932},{"x":0.33823201060295105,"y":0.8562009930610657},{"x":0.2620289921760559,"y":0.8126019835472107},{"x":0.25143200159072876,"y":0.8182070255279541},{"x":0.4697690010070801,"y":0.7919380068778992},{"x":0.46202901005744934,"y":0.7950199842453003},{"x":0.4341279864311218,"y":0.793150007724762},{"x":0.4140070080757141,"y":0.7869120240211487},{"x":0.36731600761413574,"y":0.7611899971961975},{"x":0.3069790005683899,"y":0.7685139775276184},{"x":0.285645991563797,"y":0.8465819954872131},{"x":0.43091899156570435,"y":0.7982050180435181},{"x":0.3744010031223297,"y":0.7667030096054077},{"x":0.3792940080165863,"y":0.7788199782371521},{"x":0.3431600034236908,"y":0.777334988117218},{"x":0.32444998621940613,"y":0.7640389800071716},{"x":0.45311999320983887,"y":0.8068900108337402},{"x":0.43813198804855347,"y":0.8040770292282104},{"x":0.46502000093460083,"y":0.808722972869873},{"x":0.47262999415397644,"y":0.8380560278892517},{"x":0.47253701090812683,"y":0.8367570042610168},{"x":0.4509370028972626,"y":0.8388320207595825},{"x":0.444487988948822,"y":0.8469529747962952},{"x":0.4412060081958771,"y":0.8368970155715942},{"x":0.4163619875907898,"y":0.838828980922699},{"x":0.3003750145435333,"y":0.8164119720458984},{"x":0.3378849923610687,"y":0.8648179769515991},{"x":0.32842299342155457,"y":0.8516970276832581},{"x":0.3262600004673004,"y":0.852977991104126},{"x":0.38269999623298645,"y":0.8441830277442932},{"x":0.4407140016555786,"y":0.8536670207977295},{"x":0.4478380084037781,"y":0.8537539839744568},{"x":0.4480989873409271,"y":0.8544340133666992},{"x":0.42653799057006836,"y":0.7979249954223633},{"x":0.4274269938468933,"y":0.8001109957695007},{"x":0.39092200994491577,"y":0.7687730193138123},{"x":0.4697110056877136,"y":0.7909830212593079},{"x":0.4728449881076813,"y":0.7931699752807617},{"x":0.47867700457572937,"y":0.8087000250816345},{"x":0.29909899830818176,"y":0.8664669990539551},{"x":0.4817329943180084,"y":0.8122310042381287},{"x":0.2613280117511749,"y":0.8559150099754333},{"x":0.2816379964351654,"y":0.8525040149688721},{"x":0.2636060118675232,"y":0.8593559861183167},{"x":0.2749580144882202,"y":0.8705930113792419},{"x":0.27719900012016296,"y":0.8596580028533936},{"x":0.26262399554252625,"y":0.866208016872406},{"x":0.26068100333213806,"y":0.8787130117416382},{"x":0.2617979943752289,"y":0.8862149715423584},{"x":0.27118000388145447,"y":0.8832499980926514},{"x":0.2612040042877197,"y":0.8884230256080627},{"x":0.2871139943599701,"y":0.8613539934158325},{"x":0.27966201305389404,"y":0.8697429895401001},{"x":0.27036699652671814,"y":0.8875089883804321},{"x":0.2627660036087036,"y":0.8913609981536865},{"x":0.2642880082130432,"y":0.8917610049247742},{"x":0.2632859945297241,"y":0.8940690159797668},{"x":0.26639100909233093,"y":0.8935999870300293},{"x":0.26418399810791016,"y":0.8957340121269226},{"x":0.26522600650787354,"y":0.8948690295219421},{"x":0.2655490040779114,"y":0.8955230116844177},{"x":0.478956013917923,"y":0.8227760195732117},{"x":0.4562869966030121,"y":0.8186969757080078},{"x":0.48138800263404846,"y":0.8142669796943665},{"x":0.46563801169395447,"y":0.8121079802513123},{"x":0.44154301285743713,"y":0.8108500242233276},{"x":0.42397698760032654,"y":0.7949169874191284},{"x":0.4834290146827698,"y":0.810151994228363},{"x":0.284945011138916,"y":0.860713005065918},{"x":0.4731850028038025,"y":0.8354960083961487},{"x":0.4701949954032898,"y":0.8403869867324829},{"x":0.37546399235725403,"y":0.8376860022544861},{"x":0.4745450019836426,"y":0.8342429995536804},{"x":0.4329119920730591,"y":0.8104100227355957},{"x":0.43044498562812805,"y":0.8176299929618835},{"x":0.4031040072441101,"y":0.7897289991378784},{"x":0.32756099104881287,"y":0.8487370014190674},{"x":0.4154309928417206,"y":0.8009380102157593},{"x":0.4029980003833771,"y":0.7979580163955688},{"x":0.2632240056991577,"y":0.8958479762077332},{"x":0.2623699903488159,"y":0.8953379988670349},{"x":0.36989501118659973,"y":0.8499040007591248},{"x":0.319923996925354,"y":0.7595260143280029},{"x":0.34703099727630615,"y":0.7454379796981812},{"x":0.26327499747276306,"y":0.8378480076789856},{"x":0.28212499618530273,"y":0.8388220071792603},{"x":0.32527899742126465,"y":0.8441939949989319},{"x":0.2508170008659363,"y":0.7991780042648315},{"x":0.28168800473213196,"y":0.7707239985466003},{"x":0.28819501399993896,"y":0.7717469930648804},{"x":0.28050801157951355,"y":0.7897589802742004},{"x":0.2370939999818802,"y":0.8084719777107239},{"x":0.2326440066099167,"y":0.7952460050582886},{"x":0.3052369952201843,"y":0.8781300187110901},{"x":0.31172698736190796,"y":0.8749930262565613},{"x":0.2805730104446411,"y":0.8732320070266724},{"x":0.2797499895095825,"y":0.874239981174469},{"x":0.246847003698349,"y":0.8407790064811707},{"x":0.2476090043783188,"y":0.8401809930801392},{"x":0.24498100578784943,"y":0.821615993976593},{"x":-0.3464660048484802,"y":0.4729500114917755},{"x":-0.3794440031051636,"y":0.43476998805999756},{"x":-0.38519299030303955,"y":0.4325129985809326},{"x":-0.22756600379943848,"y":0.4477919936180115},{"x":-0.2985660135746002,"y":0.4155830144882202},{"x":-0.3524389863014221,"y":0.3721359968185425},{"x":-0.3330810070037842,"y":0.3195129930973053},{"x":-0.30311399698257446,"y":0.3363879919052124},{"x":-0.2646619975566864,"y":0.335999995470047},{"x":-0.3208000063896179,"y":0.29389700293540955},{"x":-0.3502170145511627,"y":0.29764801263809204},{"x":-0.34368500113487244,"y":0.3074530065059662},{"x":-0.3191699981689453,"y":0.2637619972229004},{"x":-0.34480801224708557,"y":0.2526650130748749},{"x":-0.33287400007247925,"y":0.327006995677948},{"x":-0.2977229952812195,"y":0.3262900114059448},{"x":-0.2743619978427887,"y":0.3132700026035309},{"x":-0.310342013835907,"y":0.28909599781036377},{"x":-0.3406969904899597,"y":0.2832320034503937},{"x":-0.33184701204299927,"y":0.28200700879096985},{"x":-0.3480510115623474,"y":0.2531990110874176},{"x":-0.3496110141277313,"y":0.33049800992012024},{"x":-0.31957298517227173,"y":0.24437099695205688},{"x":-0.35330501198768616,"y":0.30379199981689453},{"x":-0.35214999318122864,"y":0.2948650121688843},{"x":-0.3589619994163513,"y":0.2744640111923218},{"x":-0.2941949963569641,"y":0.28279298543930054},{"x":-0.2950119972229004,"y":0.28245100378990173},{"x":-0.3465319871902466,"y":0.328359991312027},{"x":-0.2892340123653412,"y":0.35336700081825256},{"x":-0.29489201307296753,"y":0.3694570064544678},{"x":-0.24503099918365479,"y":0.37046700716018677},{"x":-0.2426310032606125,"y":0.3556320071220398},{"x":-0.34656599164009094,"y":0.33922699093818665},{"x":-0.34822800755500793,"y":0.3056409955024719},{"x":-0.35492798686027527,"y":0.27459898591041565},{"x":-0.3418880105018616,"y":0.2426680028438568},{"x":-0.3368130028247833,"y":0.2386849969625473},{"x":-0.3429569900035858,"y":0.2400750070810318},{"x":-0.2888779938220978,"y":0.08812250196933746},{"x":-0.2720800042152405,"y":0.08533649891614914},{"x":-0.3105669915676117,"y":0.0869344025850296},{"x":-0.3055810034275055,"y":0.08910849690437317},{"x":-0.2987610101699829,"y":0.09274029731750488},{"x":-0.35012900829315186,"y":0.21000100672245026},{"x":-0.3443720042705536,"y":0.2193560004234314},{"x":-0.33133000135421753,"y":0.13656499981880188},{"x":-0.33768200874328613,"y":0.15490199625492096},{"x":-0.3225339949131012,"y":0.1207519993185997},{"x":-0.31825798749923706,"y":0.12264999747276306},{"x":-0.29989299178123474,"y":0.13326899707317352},{"x":-0.36875298619270325,"y":0.24058100581169128},{"x":-0.30495500564575195,"y":0.15018199384212494},{"x":-0.325314998626709,"y":0.1397709995508194},{"x":-0.2990039885044098,"y":0.10575699806213379},{"x":-0.2819879949092865,"y":0.11295899748802185},{"x":-0.34033799171447754,"y":0.15429499745368958},{"x":-0.2879840135574341,"y":0.12313000112771988},{"x":-0.30142301321029663,"y":0.15189799666404724},{"x":-0.35168999433517456,"y":0.19401000440120697},{"x":-0.31981900334358215,"y":0.20308999717235565},{"x":-0.35577601194381714,"y":0.1927189975976944},{"x":-0.2849139869213104,"y":0.03539919853210449},{"x":-0.2835890054702759,"y":0.03330770134925842},{"x":-0.29101601243019104,"y":0.029896900057792664},{"x":-0.3211440145969391,"y":0.033380601555109024},{"x":-0.30257898569107056,"y":0.0726604014635086},{"x":-0.2852010130882263,"y":0.04412269964814186},{"x":-0.2981790006160736,"y":0.061886899173259735},{"x":-0.30249300599098206,"y":0.06306499987840652},{"x":-0.2914830148220062,"y":0.06677220016717911},{"x":-0.3048250079154968,"y":0.04202819988131523},{"x":-0.3022170066833496,"y":0.057990800589323044},{"x":-0.2743540108203888,"y":0.07318100333213806},{"x":-0.2767930030822754,"y":0.06748759746551514},{"x":-0.2782000005245209,"y":0.05655809864401817},{"x":-0.31151100993156433,"y":0.07199960201978683},{"x":-0.31535500288009644,"y":0.0754430964589119},{"x":-0.3129979968070984,"y":0.07239770144224167},{"x":-0.27911099791526794,"y":0.04140159860253334},{"x":-0.2830289900302887,"y":0.055383000522851944},{"x":-0.31697699427604675,"y":0.07812219858169556},{"x":-0.3245140016078949,"y":0.030308399349451065},{"x":-0.32768499851226807,"y":0.02796589955687523},{"x":-0.32675701379776,"y":0.02655770070850849},{"x":-0.2808130085468292,"y":0.026004500687122345},{"x":-0.2977850139141083,"y":0.029550600796937943},{"x":-0.3125639855861664,"y":0.03043469972908497},{"x":-0.3175329864025116,"y":0.030332500115036964},{"x":-0.32117700576782227,"y":0.02962540090084076},{"x":-0.3235180079936981,"y":0.028266699984669685},{"x":-0.27284300327301025,"y":0.02882090024650097},{"x":-0.27449101209640503,"y":0.030299799516797066},{"x":-0.3223690092563629,"y":0.021716399118304253},{"x":-0.28817200660705566,"y":0.01155409961938858},{"x":-0.2962619960308075,"y":0.011556800454854965},{"x":-0.322501003742218,"y":0.005263600032776594},{"x":-0.3054249882698059,"y":7.680400158278644E-4},{"x":-0.3167639970779419,"y":0.004134819842875004},{"x":-0.2740890085697174,"y":-0.004806070122867823},{"x":-0.2575779855251312,"y":-0.002454990055412054},{"x":-0.28200799226760864,"y":0.0010608299635350704},{"x":-0.2889670133590698,"y":0.002007419941946864},{"x":-0.28477999567985535,"y":-0.0033415600191801786},{"x":-0.2757830023765564,"y":0.36738601326942444},{"x":-0.3011380136013031,"y":0.35678398609161377},{"x":-0.3109639883041382,"y":0.35687100887298584},{"x":-0.3842720091342926,"y":0.4686039984226227},{"x":-0.39010098576545715,"y":0.4676409959793091},{"x":-0.33406999707221985,"y":0.4053199887275696},{"x":-0.3003329932689667,"y":0.32136300206184387},{"x":-0.35142800211906433,"y":0.30472201108932495},{"x":-0.3540929853916168,"y":0.296546995639801},{"x":-0.36061498522758484,"y":0.27571600675582886},{"x":-0.3401919901371002,"y":0.2502189874649048},{"x":-0.30496200919151306,"y":0.28707900643348694},{"x":-0.31730198860168457,"y":0.2911500036716461},{"x":-0.3318510055541992,"y":0.2819960117340088},{"x":-0.3186039924621582,"y":0.25169599056243896},{"x":-0.3480530083179474,"y":0.25318801403045654},{"x":-0.30803900957107544,"y":0.2728410065174103},{"x":-0.3666839897632599,"y":0.2636890113353729},{"x":-0.31537899374961853,"y":0.25096699595451355},{"x":-0.3174479901790619,"y":0.243368998169899},{"x":-0.31038400530815125,"y":0.25964099168777466},{"x":-0.28422901034355164,"y":0.29573801159858704},{"x":-0.2712000012397766,"y":0.31267601251602173},{"x":-0.34654000401496887,"y":0.3283489942550659},{"x":-0.2671619951725006,"y":0.37557798624038696},{"x":-0.341499000787735,"y":0.3453649878501892},{"x":-0.25540098547935486,"y":0.3503830134868622},{"x":-0.23755000531673431,"y":0.37101200222969055},{"x":-0.24139399826526642,"y":0.35339099168777466},{"x":-0.23237000405788422,"y":0.3719489872455597},{"x":-0.3418860137462616,"y":0.24265700578689575},{"x":-0.36105701327323914,"y":0.24801099300384521},{"x":-0.3615089952945709,"y":0.2505449950695038},{"x":-0.32874900102615356,"y":0.23737500607967377},{"x":-0.27205199003219604,"y":0.08533699810504913},{"x":-0.29019901156425476,"y":0.0862777978181839},{"x":-0.31365200877189636,"y":0.08596210181713104},{"x":-0.3176490068435669,"y":0.0845939964056015},{"x":-0.31780800223350525,"y":0.08410350233316422},{"x":-0.3055739998817444,"y":0.08910469710826874},{"x":-0.3105590045452118,"y":0.0869297981262207},{"x":-0.31346601247787476,"y":0.1652050018310547},{"x":-0.3100929856300354,"y":0.16697299480438232},{"x":-0.3313240110874176,"y":0.13655699789524078},{"x":-0.32117000222206116,"y":0.10385700315237045},{"x":-0.3225269913673401,"y":0.12074600160121918},{"x":-0.30376800894737244,"y":0.10054200142621994},{"x":-0.361286997795105,"y":0.2250799983739853},{"x":-0.3315980136394501,"y":0.22356699407100677},{"x":-0.3266890048980713,"y":0.22431300580501556},{"x":-0.31045201420783997,"y":0.16753000020980835},{"x":-0.31395500898361206,"y":0.16597500443458557},{"x":-0.325300008058548,"y":0.13976499438285828},{"x":-0.324086993932724,"y":0.10273999720811844},{"x":-0.32023000717163086,"y":0.09064369648694992},{"x":-0.320372998714447,"y":0.21567800641059875},{"x":-0.321960985660553,"y":0.22187800705432892},{"x":-0.3233329951763153,"y":0.22165100276470184},{"x":-0.2877500057220459,"y":0.1228329986333847},{"x":-0.3280099928379059,"y":0.11862300336360931},{"x":-0.36583900451660156,"y":0.21033300459384918},{"x":-0.37389299273490906,"y":0.22877199947834015},{"x":-0.34831398725509644,"y":0.23006199300289154},{"x":-0.3424060046672821,"y":0.23010100424289703},{"x":-0.3282960057258606,"y":0.2282249927520752},{"x":-0.33118799328804016,"y":0.19894500076770782},{"x":-0.3283909857273102,"y":0.20053599774837494},{"x":-0.32391899824142456,"y":0.2019300013780594},{"x":-0.3474380075931549,"y":0.1730249971151352},{"x":-0.3482449948787689,"y":0.17279699444770813},{"x":-0.32640498876571655,"y":0.20057399570941925},{"x":-0.2768020033836365,"y":0.03476160019636154},{"x":-0.2944740056991577,"y":0.026158999651670456},{"x":-0.2857249975204468,"y":0.03059300035238266},{"x":-0.31864601373672485,"y":0.03806440159678459},{"x":-0.32022398710250854,"y":0.037559401243925095},{"x":-0.30501699447631836,"y":0.07691659778356552},{"x":-0.29384300112724304,"y":0.07187079638242722},{"x":-0.27539899945259094,"y":0.07407049834728241},{"x":-0.2769069969654083,"y":0.04217740148305893},{"x":-0.3139269948005676,"y":0.07557299733161926},{"x":-0.28059500455856323,"y":0.06684400141239166},{"x":-0.2718290090560913,"y":0.07870270311832428},{"x":-0.3169519901275635,"y":0.07812049984931946},{"x":-0.30606698989868164,"y":0.03245279937982559},{"x":-0.27276700735092163,"y":0.030505100265145302},{"x":-0.2722170054912567,"y":0.031408198177814484},{"x":-0.28356999158859253,"y":0.03243440017104149},{"x":-0.2726779878139496,"y":0.030054999515414238},{"x":-0.3069239854812622,"y":0.0196554996073246},{"x":-0.32235801219940186,"y":0.021720200777053833},{"x":-0.31270501017570496,"y":0.02975820004940033},{"x":-0.29628100991249084,"y":0.011559800244867802},{"x":-0.2650040090084076,"y":0.003778160084038973},{"x":-0.2643809914588928,"y":0.008715800009667873},{"x":-0.2608030140399933,"y":0.007345240097492933},{"x":-0.32259300351142883,"y":0.019929399713873863},{"x":-0.3180539906024933,"y":8.299400215037167E-4},{"x":-0.31759798526763916,"y":0.0010445199441164732},{"x":-0.31742599606513977,"y":-7.460599881596863E-4},{"x":-0.2935650050640106,"y":-0.002506159944459796},{"x":-0.2669599950313568,"y":-0.004764010198414326},{"x":-0.26642000675201416,"y":-0.0027952699456363916},{"x":-0.2744370102882385,"y":-0.004623129963874817},{"x":-0.4556899964809418,"y":0.5542010068893433},{"x":-0.39333000779151917,"y":0.6108599901199341},{"x":-0.4279400110244751,"y":0.6093800067901611},{"x":-0.4411880075931549,"y":0.6001780033111572},{"x":-0.43835800886154175,"y":0.5951359868049622},{"x":-0.4414930045604706,"y":0.600275993347168},{"x":-0.44394901394844055,"y":0.6051300168037415},{"x":-0.4209370017051697,"y":0.5794979929924011},{"x":-0.3933599889278412,"y":0.6108769774436951},{"x":-0.47059500217437744,"y":0.5849369764328003},{"x":-0.46378400921821594,"y":0.5807499885559082},{"x":-0.45495501160621643,"y":0.5916470289230347},{"x":-0.46590399742126465,"y":0.5823659896850586},{"x":-0.43966200947761536,"y":0.5611270070075989},{"x":-0.45386600494384766,"y":0.5550029873847961},{"x":-0.47369301319122314,"y":0.5750799775123596},{"x":-0.39098599553108215,"y":0.6006399989128113},{"x":-0.41505900025367737,"y":0.5801079869270325},{"x":-0.3916420042514801,"y":0.6099069714546204},{"x":-0.42036399245262146,"y":0.5822359919548035},{"x":-0.4208320081233978,"y":0.5795080065727234},{"x":-0.42483100295066833,"y":0.5781469941139221},{"x":-0.4317280054092407,"y":0.5766040086746216},{"x":-0.45267999172210693,"y":0.5908899903297424},{"x":-0.4635910093784332,"y":0.5813549757003784},{"x":-0.4426780045032501,"y":0.5636669993400574},{"x":-0.4570460021495819,"y":0.5931509733200073},{"x":-0.4632459878921509,"y":0.5812600255012512},{"x":-0.46462300419807434,"y":0.5825330018997192},{"x":-0.46625399589538574,"y":0.5274519920349121},{"x":-0.5151839852333069,"y":0.5298119783401489},{"x":-0.506738007068634,"y":0.527895987033844},{"x":-0.5338180065155029,"y":0.4821630120277405},{"x":-0.5210610032081604,"y":0.5086110234260559},{"x":-0.5145570039749146,"y":0.5071060061454773},{"x":-0.4816470146179199,"y":0.49810299277305603},{"x":-0.5064529776573181,"y":0.5491790175437927},{"x":-0.49275898933410645,"y":0.5647670030593872},{"x":-0.4947090148925781,"y":0.565733015537262},{"x":-0.4639039933681488,"y":0.5274770259857178},{"x":-0.4682230055332184,"y":0.5143600106239319},{"x":-0.5176029801368713,"y":0.48107799887657166},{"x":-0.5277760028839111,"y":0.4819679856300354},{"x":-0.49571600556373596,"y":0.5457350015640259},{"x":-0.5057560205459595,"y":0.5282869935035706},{"x":-0.4664050042629242,"y":0.531702995300293},{"x":-0.5181909799575806,"y":0.38919100165367126},{"x":-0.48156899213790894,"y":0.42152801156044006},{"x":-0.47659599781036377,"y":0.42128199338912964},{"x":-0.47968000173568726,"y":0.34154099225997925},{"x":-0.48260998725891113,"y":0.422230988740921},{"x":-0.4914669990539551,"y":0.4495129883289337},{"x":-0.5228189826011658,"y":0.45235300064086914},{"x":-0.5211189985275269,"y":0.3909839987754822},{"x":-0.5378410220146179,"y":0.3662559986114502},{"x":-0.5134040117263794,"y":0.35176798701286316},{"x":-0.47805601358413696,"y":0.4504059851169586},{"x":-0.5144209861755371,"y":0.4533810019493103},{"x":-0.5315520167350769,"y":0.45322999358177185},{"x":-0.5279600024223328,"y":0.30640900135040283},{"x":-0.5056930184364319,"y":0.29948699474334717},{"x":-0.48822298645973206,"y":0.277446985244751},{"x":-0.4863620102405548,"y":0.27738600969314575},{"x":-0.5325239896774292,"y":0.3026700019836426},{"x":-0.4926289916038513,"y":0.2598629891872406},{"x":-0.5005080103874207,"y":0.2674599885940552},{"x":-0.493804007768631,"y":0.2817290127277374},{"x":-0.5318809747695923,"y":0.25370100140571594},{"x":-0.503944993019104,"y":0.2528829872608185},{"x":-0.5135790109634399,"y":0.24515999853610992},{"x":-0.5042679905891418,"y":0.2562420070171356},{"x":-0.5345969796180725,"y":0.23433099687099457},{"x":-0.49028098583221436,"y":0.2608250081539154},{"x":-0.5204219818115234,"y":0.24034300446510315},{"x":-0.4830310046672821,"y":0.2945919930934906},{"x":-0.538972020149231,"y":0.3276819884777069},{"x":-0.5193009972572327,"y":0.2851560115814209},{"x":-0.497408002614975,"y":0.28020501136779785},{"x":-0.5337910056114197,"y":0.245618999004364},{"x":-0.5093989968299866,"y":0.2470880001783371},{"x":-0.5005620121955872,"y":0.25688299536705017}]}],"marks":[{"type":"symbol","from":{"data":"504e4fe1-2fae-4645-a611-f6558c7dfba9"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"fill":{"value":"steelblue"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":10},"stroke":{"value":"transparent"}},"hover":{"size":{"value":30},"stroke":{"value":"white"}}}}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"504e4fe1-2fae-4645-a611-f6558c7dfba9","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"504e4fe1-2fae-4645-a611-f6558c7dfba9","field":"data.y"}}],"axes":[{"type":"x","scale":"x"},{"type":"y","scale":"y"}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :data [{:name \"504e4fe1-2fae-4645-a611-f6558c7dfba9\", :values ({:x -0.379364, :y 0.59686} {:x -0.378213, :y 0.604354} {:x -0.350518, :y 0.576118} {:x -0.235423, :y 0.626913} {:x -0.288702, :y 0.61752} {:x -0.284682, :y 0.610383} {:x -0.344015, :y 0.395007} {:x -0.128878, :y 0.36707} {:x -0.181188, :y 0.501145} {:x -0.16608, :y 0.591776} {:x -0.364832, :y 0.602398} {:x -0.370055, :y 0.605803} {:x -0.307721, :y 0.608289} {:x -0.357909, :y 0.384725} {:x -0.373604, :y 0.423641} {:x -0.379703, :y 0.423774} {:x -0.386353, :y 0.5514} {:x -0.156904, :y 0.496369} {:x -0.15357, :y 0.514682} {:x -0.185164, :y 0.46092} {:x -0.19244, :y 0.462045} {:x -0.180041, :y 0.550179} {:x -0.127025, :y 0.405157} {:x -0.302955, :y 0.59845} {:x -0.20791, :y 0.421273} {:x -0.221494, :y 0.53766} {:x -0.308477, :y 0.545805} {:x -0.191594, :y 0.556905} {:x -0.206884, :y 0.486564} {:x -0.362862, :y 0.524251} {:x -0.270519, :y 0.625058} {:x -0.261803, :y 0.613733} {:x -0.36289, :y 0.606716} {:x -0.351944, :y 0.392291} {:x -0.130365, :y 0.358743} {:x -0.174431, :y 0.499809} {:x -0.178656, :y 0.48089} {:x -0.185685, :y 0.482044} {:x -0.144969, :y 0.569225} {:x -0.152129, :y 0.597009} {:x -0.20434, :y 0.613752} {:x -0.334439, :y 0.389554} {:x -0.363845, :y 0.607169} {:x -0.310375, :y 0.614265} {:x -0.210765, :y 0.395936} {:x -0.210669, :y 0.394319} {:x -0.362806, :y 0.596079} {:x -0.346776, :y 0.609232} {:x -0.156902, :y 0.496351} {:x -0.178213, :y 0.522067} {:x -0.178077, :y 0.56717} {:x -0.323949, :y 0.589618} {:x -0.215571, :y 0.422093} {:x -0.206392, :y 0.583538} {:x -0.204253, :y 0.532993} {:x -0.362864, :y 0.524237} {:x -0.0539967, :y 0.58087} {:x 0.00715829, :y 0.526077} {:x 0.0347616, :y 0.377985} {:x -0.0208929, :y 0.331236} {:x -0.007397, :y 0.358511} {:x -0.00887997, :y 0.389383} {:x -0.101038, :y 0.556823} {:x -0.0268377, :y 0.526218} {:x -0.026972, :y 0.584236} {:x -0.00264131, :y 0.548692} {:x -0.111994, :y 0.585487} {:x -0.0215224, :y 0.507167} {:x 0.208271, :y 0.559373} {:x 0.197406, :y 0.55185} {:x 0.0561214, :y 0.634259} {:x 2.5757E-4, :y 0.61655} {:x 0.045385, :y 0.635159} {:x 0.0245543, :y 0.624793} {:x 0.235057, :y 0.481414} {:x 0.165118, :y 0.56768} {:x 0.0778663, :y 0.62351} {:x 0.237024, :y 0.467801} {:x 0.145437, :y 0.566069} {:x 0.189575, :y 0.538713} {:x 0.0344689, :y 0.590392} {:x 0.035641, :y 0.529854} {:x 0.0726238, :y 0.348329} {:x 0.0712221, :y 0.390739} {:x 0.18764, :y 0.371877} {:x 0.174594, :y 0.367555} {:x 0.193835, :y 0.377301} {:x 0.0507707, :y 0.456146} {:x 0.151017, :y 0.363887} {:x 0.224783, :y 0.409318} {:x 0.211479, :y 0.421688} {:x 0.220758, :y 0.49582} {:x 0.055498, :y 0.607472} {:x 0.20108, :y 0.391051} {:x 0.228154, :y 0.438449} {:x 0.234256, :y 0.448246} {:x 0.0826746, :y 0.392551} {:x 0.0718381, :y 0.424815} {:x 0.192092, :y 0.499273} {:x 0.234836, :y 0.465793} {:x 0.149801, :y 0.366139} {:x 0.140704, :y 0.363454} {:x 0.0975254, :y 0.351879} {:x 0.225659, :y 0.431484} {:x 0.189307, :y 0.479077} {:x 0.133075, :y 0.480778} {:x 0.0891243, :y 0.508517} {:x 0.127007, :y 0.445651} {:x 0.0802833, :y 0.416703} {:x 0.0748025, :y 0.46537} {:x 0.216655, :y 0.554398} {:x 0.23568, :y 0.496998} {:x 0.0219751, :y 0.627115} {:x 0.0246118, :y 0.624724} {:x 0.0432906, :y 0.63764} {:x 0.0720952, :y 0.627454} {:x 0.173941, :y 0.536711} {:x 0.0599473, :y 0.562212} {:x 0.0355542, :y 0.529793} {:x 0.127102, :y 0.355947} {:x 0.0725812, :y 0.348305} {:x 0.193447, :y 0.377537} {:x 0.133883, :y 0.359037} {:x 0.19374, :y 0.377259} {:x 0.212674, :y 0.390105} {:x 0.0436101, :y 0.494779} {:x 0.0403478, :y 0.510126} {:x 0.215799, :y 0.435963} {:x 0.220783, :y 0.411723} {:x 0.226624, :y 0.431951} {:x 0.0750874, :y 0.535943} {:x 0.0675408, :y 0.615985} {:x 0.222649, :y 0.42586} {:x 0.0885517, :y 0.366599} {:x 0.0680082, :y 0.4392} {:x 0.0835429, :y 0.349236} {:x 0.0515443, :y 0.510495} {:x 0.217632, :y 0.414316} {:x 0.17313, :y 0.496656} {:x 0.143843, :y 0.491442} {:x 0.0889903, :y 0.508438} {:x 0.102125, :y 0.518664} {:x 0.146969, :y 0.359831} {:x 0.197868, :y 0.421646} {:x 0.1746, :y 0.406381} {:x 0.163266, :y 0.408918} {:x 0.143333, :y 0.42354} {:x 0.0926073, :y 0.433919} {:x 0.0877178, :y 0.422183} {:x 0.0827301, :y 0.406599} {:x 0.145142, :y 0.224804} {:x 0.123635, :y 0.223647} {:x 0.15654, :y 0.226517} {:x 0.145748, :y 0.224481} {:x 0.123985, :y 0.223322} {:x 0.117641, :y 0.223423} {:x 0.122137, :y 0.314555} {:x 0.144522, :y 0.320981} {:x 0.169427, :y 0.33966} {:x 0.163404, :y 0.302548} {:x 0.152834, :y 0.317809} {:x 0.121958, :y 0.288237} {:x 0.124362, :y 0.262083} {:x 0.106516, :y 0.307309} {:x 0.166925, :y 0.297951} {:x 0.164817, :y 0.271178} {:x 0.161333, :y 0.252034} {:x 0.170565, :y 0.359906} {:x 0.0988101, :y 0.340429} {:x 0.177933, :y 0.355343} {:x 0.111845, :y 0.0879022} {:x 0.150219, :y 0.100313} {:x 0.142481, :y 0.0968945} {:x 0.141801, :y 0.0891315} {:x 0.118419, :y 0.0877557} {:x 0.108198, :y 0.0904398} {:x 0.107081, :y 0.090234} {:x 0.107041, :y 0.0883736} {:x 0.107177, :y 0.098927} {:x 0.144356, :y 0.110921} {:x 0.143121, :y 0.112441} {:x 0.142819, :y 0.149862} {:x 0.130658, :y 0.119749} {:x 0.137419, :y 0.119865} {:x 0.142283, :y 0.168929} {:x 0.143501, :y 0.119735} {:x 0.119708, :y 0.168982} {:x 0.110612, :y 0.114934} {:x 0.121376, :y 0.186422} {:x 0.150513, :y 0.165935} {:x 0.12645, :y 0.0467251} {:x 0.109031, :y 0.0382387} {:x 0.136318, :y 0.0818588} {:x 0.116766, :y 0.067376} {:x 0.142956, :y 0.0685622} {:x 0.11505, :y 0.0669056} {:x 0.140013, :y 0.0763762} {:x 0.143014, :y 0.0458494} {:x 0.118646, :y 0.013721} {:x 0.1212, :y 0.0132845} {:x 0.121652, :y 0.0117185} {:x 0.176041, :y 0.0164465} {:x 0.12719, :y 0.0321875} {:x 0.154495, :y 0.0447372} {:x 0.151947, :y 0.0139211} {:x 0.138203, :y 0.357813} {:x 0.114483, :y 0.353542} {:x 0.181601, :y 0.372546} {:x 0.0910705, :y 0.384046} {:x 0.163332, :y 0.377492} {:x 0.175011, :y 0.417092} {:x 0.0997704, :y 0.353193} {:x 0.0994147, :y 0.353718} {:x 0.0927475, :y 0.433997} {:x 0.112092, :y 0.411128} {:x 0.0988506, :y 0.416338} {:x 0.145111, :y 0.224743} {:x 0.124035, :y 0.216429} {:x 0.157124, :y 0.214} {:x 0.115783, :y 0.223613} {:x 0.117863, :y 0.223702} {:x 0.163999, :y 0.227867} {:x 0.111329, :y 0.310165} {:x 0.149302, :y 0.342766} {:x 0.142116, :y 0.269236} {:x 0.142294, :y 0.31557} {:x 0.14871, :y 0.332767} {:x 0.144575, :y 0.294888} {:x 0.133459, :y 0.291903} {:x 0.145412, :y 0.248557} {:x 0.110482, :y 0.285361} {:x 0.10329, :y 0.325972} {:x 0.161305, :y 0.252037} {:x 0.106159, :y 0.307809} {:x 0.102503, :y 0.326586} {:x 0.164004, :y 0.24038} {:x 0.133298, :y 0.342806} {:x 0.164077, :y 0.360241} {:x 0.112912, :y 0.353304} {:x 0.103561, :y 0.344751} {:x 0.131385, :y 0.0883749} {:x 0.149682, :y 0.0897758} {:x 0.118416, :y 0.0877599} {:x 0.108098, :y 0.088343} {:x 0.112919, :y 0.102134} {:x 0.130659, :y 0.119786} {:x 0.153073, :y 0.196235} {:x 0.155343, :y 0.20333} {:x 0.134846, :y 0.169548} {:x 0.148002, :y 0.167166} {:x 0.125218, :y 0.131589} {:x 0.155314, :y 0.183141} {:x 0.118681, :y 0.168946} {:x 0.118251, :y 0.209058} {:x 0.16016, :y 0.194351} {:x 0.156623, :y 0.182646} {:x 0.146261, :y 0.132331} {:x 0.118641, :y 0.115108} {:x 0.125004, :y 0.168946} {:x 0.126846, :y 0.186418} {:x 0.111806, :y 0.0389463} {:x 0.151976, :y 0.0466259} {:x 0.125526, :y 0.0396248} {:x 0.117013, :y 0.0440717} {:x 0.148498, :y 0.0506778} {:x 0.14851, :y 0.0509697} {:x 0.112063, :y 0.037726} {:x 0.152459, :y 0.0477509} {:x 0.130194, :y 0.0821358} {:x 0.11677, :y 0.0673992} {:x 0.142856, :y 0.0767923} {:x 0.123674, :y 0.0678472} {:x 0.13982, :y 0.0688381} {:x 0.11755, :y 0.0672901} {:x 0.144966, :y 0.0766267} {:x 0.107792, :y 0.0838527} {:x 0.148854, :y 0.0449564} {:x 0.143014, :y 0.0458777} {:x 0.112195, :y 0.0367899} {:x 0.108876, :y 0.0359609} {:x 0.112199, :y 0.0354286} {:x 0.149756, :y 0.0435826} {:x 0.155793, :y 0.045878} {:x 0.143331, :y 0.0335099} {:x 0.165138, :y 0.0273427} {:x 0.171295, :y 0.0317625} {:x 0.12139, :y 0.016618} {:x 0.179257, :y 0.0215207} {:x 0.121838, :y 0.0166371} {:x 0.123016, :y 0.0114073} {:x 0.150231, :y 0.0132148} {:x 0.13253, :y 0.0120576} {:x 0.114346, :y 0.0300792} {:x 0.110087, :y 0.0308649} {:x 0.144272, :y 0.0441385} {:x 0.154055, :y 0.0427675} {:x 0.160473, :y 0.0153272} {:x 0.105057, :y 0.652076} {:x 0.270831, :y 0.580518} {:x 0.246954, :y 0.605205} {:x 0.112716, :y 0.679426} {:x 0.206829, :y 0.64245} {:x 0.19895, :y 0.649424} {:x 0.257836, :y 0.533941} {:x 0.134495, :y 0.662564} {:x 0.181682, :y 0.702941} {:x 0.262332, :y 0.587265} {:x 0.236111, :y 0.616574} {:x 0.11274, :y 0.679361} {:x 0.112701, :y 0.679337} {:x 0.241991, :y 0.737596} {:x 0.335895, :y 0.733099} {:x 0.294894, :y 0.64595} {:x 0.263111, :y 0.67531} {:x 0.21184, :y 0.723294} {:x 0.27143, :y 0.665892} {:x 0.282495, :y 0.731958} {:x 0.259645, :y 0.715863} {:x 0.249074, :y 0.764959} {:x 0.245544, :y 0.767067} {:x 0.226787, :y 0.752432} {:x 0.217709, :y 0.762582} {:x 0.296694, :y 0.726587} {:x 0.292706, :y 0.729167} {:x 0.318183, :y 0.689828} {:x 0.322686, :y 0.717087} {:x 0.188253, :y 0.75007} {:x 0.294992, :y 0.64585} {:x 0.286539, :y 0.650658} {:x 0.272296, :y 0.665336} {:x 0.287044, :y 0.687092} {:x 0.245849, :y 0.76678} {:x 0.219247, :y 0.760701} {:x 0.23388, :y 0.744862} {:x 0.188235, :y 0.75004} {:x 0.394917, :y 0.826409} {:x 0.473878, :y 0.807621} {:x 0.454879, :y 0.804527} {:x 0.440459, :y 0.803181} {:x 0.482534, :y 0.809168} {:x 0.482178, :y 0.80648} {:x 0.453218, :y 0.842712} {:x 0.449662, :y 0.843744} {:x 0.461722, :y 0.839102} {:x 0.454628, :y 0.843725} {:x 0.32114, :y 0.842984} {:x 0.462861, :y 0.835706} {:x 0.456963, :y 0.850023} {:x 0.461275, :y 0.848478} {:x 0.342995, :y 0.845032} {:x 0.336635, :y 0.861361} {:x 0.32938, :y 0.85755} {:x 0.324926, :y 0.848685} {:x 0.343387, :y 0.852992} {:x 0.333348, :y 0.858974} {:x 0.327484, :y 0.851839} {:x 0.330188, :y 0.856358} {:x 0.336471, :y 0.840951} {:x 0.324633, :y 0.843135} {:x 0.325823, :y 0.847182} {:x 0.247159, :y 0.821011} {:x 0.46914, :y 0.792376} {:x 0.444652, :y 0.78996} {:x 0.415009, :y 0.780233} {:x 0.376746, :y 0.76433} {:x 0.365214, :y 0.758532} {:x 0.44005, :y 0.791682} {:x 0.372365, :y 0.765935} {:x 0.332744, :y 0.742927} {:x 0.328756, :y 0.738954} {:x 0.304872, :y 0.769963} {:x 0.284355, :y 0.835744} {:x 0.433052, :y 0.798194} {:x 0.377668, :y 0.772855} {:x 0.329436, :y 0.77801} {:x 0.307335, :y 0.786554} {:x 0.452302, :y 0.809567} {:x 0.472199, :y 0.810356} {:x 0.472323, :y 0.836265} {:x 0.391953, :y 0.798724} {:x 0.426911, :y 0.802859} {:x 0.439896, :y 0.837809} {:x 0.415021, :y 0.839762} {:x 0.354863, :y 0.839672} {:x 0.333651, :y 0.837609} {:x 0.297384, :y 0.835671} {:x 0.301782, :y 0.858875} {:x 0.32102, :y 0.855914} {:x 0.330288, :y 0.863835} {:x 0.345827, :y 0.849224} {:x 0.344525, :y 0.844875} {:x 0.471288, :y 0.802945} {:x 0.468217, :y 0.799027} {:x 0.439855, :y 0.785832} {:x 0.46594, :y 0.788257} {:x 0.463698, :y 0.808432} {:x 0.429562, :y 0.802201} {:x 0.460735, :y 0.804519} {:x 0.471009, :y 0.805175} {:x 0.259232, :y 0.847192} {:x 0.325743, :y 0.86899} {:x 0.480849, :y 0.812846} {:x 0.374311, :y 0.863194} {:x 0.27644, :y 0.853752} {:x 0.274101, :y 0.844933} {:x 0.275977, :y 0.864731} {:x 0.257702, :y 0.873391} {:x 0.261041, :y 0.860834} {:x 0.269572, :y 0.873844} {:x 0.266994, :y 0.880661} {:x 0.257692, :y 0.889208} {:x 0.265058, :y 0.89203} {:x 0.266154, :y 0.891169} {:x 0.258692, :y 0.882924} {:x 0.259726, :y 0.893518} {:x 0.261214, :y 0.893928} {:x 0.259475, :y 0.897464} {:x 0.464281, :y 0.813053} {:x 0.452972, :y 0.811574} {:x 0.4801, :y 0.825589} {:x 0.480204, :y 0.825862} {:x 0.454485, :y 0.853335} {:x 0.443416, :y 0.855393} {:x 0.439046, :y 0.855795} {:x 0.474547, :y 0.833077} {:x 0.47465, :y 0.833315} {:x 0.440456, :y 0.800685} {:x 0.369219, :y 0.778211} {:x 0.380841, :y 0.793198} {:x 0.378512, :y 0.803934} {:x 0.47703, :y 0.830381} {:x 0.472603, :y 0.836782} {:x 0.336723, :y 0.870689} {:x 0.458436, :y 0.786227} {:x 0.424722, :y 0.808279} {:x 0.4768, :y 0.827275} {:x 0.405133, :y 0.816604} {:x 0.325046, :y 0.850488} {:x 0.323328, :y 0.839056} {:x 0.329504, :y 0.838337} {:x 0.353242, :y 0.851179} {:x 0.25938, :y 0.897443} {:x 0.258726, :y 0.897685} {:x 0.340035, :y 0.756983} {:x 0.261019, :y 0.839608} {:x 0.283218, :y 0.793364} {:x 0.478482, :y 0.797468} {:x 0.447895, :y 0.854474} {:x 0.483785, :y 0.813505} {:x 0.475473, :y 0.794786} {:x 0.340074, :y 0.851492} {:x 0.336665, :y 0.855604} {:x 0.330229, :y 0.856942} {:x 0.323324, :y 0.839177} {:x 0.302542, :y 0.869721} {:x 0.315189, :y 0.87357} {:x 0.243972, :y 0.786975} {:x 0.248561, :y 0.783477} {:x 0.258474, :y 0.77725} {:x 0.271292, :y 0.790369} {:x 0.279407, :y 0.772639} {:x 0.232611, :y 0.795192} {:x 0.246616, :y 0.840952} {:x 0.273077, :y 0.869933} {:x 0.240349, :y 0.80604} {:x 0.237919, :y 0.807701} {:x 0.291252, :y 0.874812} {:x 0.258257, :y 0.857134} {:x 0.265099, :y 0.86309} {:x 0.253052, :y 0.851696} {:x 0.27319, :y 0.869843} {:x 0.436786, :y 0.801923} {:x 0.445344, :y 0.803459} {:x 0.462789, :y 0.805368} {:x 0.445442, :y 0.803433} {:x 0.447999, :y 0.803812} {:x 0.479181, :y 0.805859} {:x 0.32025, :y 0.847517} {:x 0.463801, :y 0.835577} {:x 0.46763, :y 0.835972} {:x 0.470607, :y 0.838141} {:x 0.469412, :y 0.841868} {:x 0.452992, :y 0.840302} {:x 0.342258, :y 0.85754} {:x 0.328773, :y 0.838359} {:x 0.339808, :y 0.839086} {:x 0.344467, :y 0.843935} {:x 0.339115, :y 0.858036} {:x 0.343222, :y 0.843624} {:x 0.345681, :y 0.847605} {:x 0.338232, :y 0.856201} {:x 0.262029, :y 0.812602} {:x 0.251432, :y 0.818207} {:x 0.469769, :y 0.791938} {:x 0.462029, :y 0.79502} {:x 0.434128, :y 0.79315} {:x 0.414007, :y 0.786912} {:x 0.367316, :y 0.76119} {:x 0.306979, :y 0.768514} {:x 0.285646, :y 0.846582} {:x 0.430919, :y 0.798205} {:x 0.374401, :y 0.766703} {:x 0.379294, :y 0.77882} {:x 0.34316, :y 0.777335} {:x 0.32445, :y 0.764039} {:x 0.45312, :y 0.80689} {:x 0.438132, :y 0.804077} {:x 0.46502, :y 0.808723} {:x 0.47263, :y 0.838056} {:x 0.472537, :y 0.836757} {:x 0.450937, :y 0.838832} {:x 0.444488, :y 0.846953} {:x 0.441206, :y 0.836897} {:x 0.416362, :y 0.838829} {:x 0.300375, :y 0.816412} {:x 0.337885, :y 0.864818} {:x 0.328423, :y 0.851697} {:x 0.32626, :y 0.852978} {:x 0.3827, :y 0.844183} {:x 0.440714, :y 0.853667} {:x 0.447838, :y 0.853754} {:x 0.448099, :y 0.854434} {:x 0.426538, :y 0.797925} {:x 0.427427, :y 0.800111} {:x 0.390922, :y 0.768773} {:x 0.469711, :y 0.790983} {:x 0.472845, :y 0.79317} {:x 0.478677, :y 0.8087} {:x 0.299099, :y 0.866467} {:x 0.481733, :y 0.812231} {:x 0.261328, :y 0.855915} {:x 0.281638, :y 0.852504} {:x 0.263606, :y 0.859356} {:x 0.274958, :y 0.870593} {:x 0.277199, :y 0.859658} {:x 0.262624, :y 0.866208} {:x 0.260681, :y 0.878713} {:x 0.261798, :y 0.886215} {:x 0.27118, :y 0.88325} {:x 0.261204, :y 0.888423} {:x 0.287114, :y 0.861354} {:x 0.279662, :y 0.869743} {:x 0.270367, :y 0.887509} {:x 0.262766, :y 0.891361} {:x 0.264288, :y 0.891761} {:x 0.263286, :y 0.894069} {:x 0.266391, :y 0.8936} {:x 0.264184, :y 0.895734} {:x 0.265226, :y 0.894869} {:x 0.265549, :y 0.895523} {:x 0.478956, :y 0.822776} {:x 0.456287, :y 0.818697} {:x 0.481388, :y 0.814267} {:x 0.465638, :y 0.812108} {:x 0.441543, :y 0.81085} {:x 0.423977, :y 0.794917} {:x 0.483429, :y 0.810152} {:x 0.284945, :y 0.860713} {:x 0.473185, :y 0.835496} {:x 0.470195, :y 0.840387} {:x 0.375464, :y 0.837686} {:x 0.474545, :y 0.834243} {:x 0.432912, :y 0.81041} {:x 0.430445, :y 0.81763} {:x 0.403104, :y 0.789729} {:x 0.327561, :y 0.848737} {:x 0.415431, :y 0.800938} {:x 0.402998, :y 0.797958} {:x 0.263224, :y 0.895848} {:x 0.26237, :y 0.895338} {:x 0.369895, :y 0.849904} {:x 0.319924, :y 0.759526} {:x 0.347031, :y 0.745438} {:x 0.263275, :y 0.837848} {:x 0.282125, :y 0.838822} {:x 0.325279, :y 0.844194} {:x 0.250817, :y 0.799178} {:x 0.281688, :y 0.770724} {:x 0.288195, :y 0.771747} {:x 0.280508, :y 0.789759} {:x 0.237094, :y 0.808472} {:x 0.232644, :y 0.795246} {:x 0.305237, :y 0.87813} {:x 0.311727, :y 0.874993} {:x 0.280573, :y 0.873232} {:x 0.27975, :y 0.87424} {:x 0.246847, :y 0.840779} {:x 0.247609, :y 0.840181} {:x 0.244981, :y 0.821616} {:x -0.346466, :y 0.47295} {:x -0.379444, :y 0.43477} {:x -0.385193, :y 0.432513} {:x -0.227566, :y 0.447792} {:x -0.298566, :y 0.415583} {:x -0.352439, :y 0.372136} {:x -0.333081, :y 0.319513} {:x -0.303114, :y 0.336388} {:x -0.264662, :y 0.336} {:x -0.3208, :y 0.293897} {:x -0.350217, :y 0.297648} {:x -0.343685, :y 0.307453} {:x -0.31917, :y 0.263762} {:x -0.344808, :y 0.252665} {:x -0.332874, :y 0.327007} {:x -0.297723, :y 0.32629} {:x -0.274362, :y 0.31327} {:x -0.310342, :y 0.289096} {:x -0.340697, :y 0.283232} {:x -0.331847, :y 0.282007} {:x -0.348051, :y 0.253199} {:x -0.349611, :y 0.330498} {:x -0.319573, :y 0.244371} {:x -0.353305, :y 0.303792} {:x -0.35215, :y 0.294865} {:x -0.358962, :y 0.274464} {:x -0.294195, :y 0.282793} {:x -0.295012, :y 0.282451} {:x -0.346532, :y 0.32836} {:x -0.289234, :y 0.353367} {:x -0.294892, :y 0.369457} {:x -0.245031, :y 0.370467} {:x -0.242631, :y 0.355632} {:x -0.346566, :y 0.339227} {:x -0.348228, :y 0.305641} {:x -0.354928, :y 0.274599} {:x -0.341888, :y 0.242668} {:x -0.336813, :y 0.238685} {:x -0.342957, :y 0.240075} {:x -0.288878, :y 0.0881225} {:x -0.27208, :y 0.0853365} {:x -0.310567, :y 0.0869344} {:x -0.305581, :y 0.0891085} {:x -0.298761, :y 0.0927403} {:x -0.350129, :y 0.210001} {:x -0.344372, :y 0.219356} {:x -0.33133, :y 0.136565} {:x -0.337682, :y 0.154902} {:x -0.322534, :y 0.120752} {:x -0.318258, :y 0.12265} {:x -0.299893, :y 0.133269} {:x -0.368753, :y 0.240581} {:x -0.304955, :y 0.150182} {:x -0.325315, :y 0.139771} {:x -0.299004, :y 0.105757} {:x -0.281988, :y 0.112959} {:x -0.340338, :y 0.154295} {:x -0.287984, :y 0.12313} {:x -0.301423, :y 0.151898} {:x -0.35169, :y 0.19401} {:x -0.319819, :y 0.20309} {:x -0.355776, :y 0.192719} {:x -0.284914, :y 0.0353992} {:x -0.283589, :y 0.0333077} {:x -0.291016, :y 0.0298969} {:x -0.321144, :y 0.0333806} {:x -0.302579, :y 0.0726604} {:x -0.285201, :y 0.0441227} {:x -0.298179, :y 0.0618869} {:x -0.302493, :y 0.063065} {:x -0.291483, :y 0.0667722} {:x -0.304825, :y 0.0420282} {:x -0.302217, :y 0.0579908} {:x -0.274354, :y 0.073181} {:x -0.276793, :y 0.0674876} {:x -0.2782, :y 0.0565581} {:x -0.311511, :y 0.0719996} {:x -0.315355, :y 0.0754431} {:x -0.312998, :y 0.0723977} {:x -0.279111, :y 0.0414016} {:x -0.283029, :y 0.055383} {:x -0.316977, :y 0.0781222} {:x -0.324514, :y 0.0303084} {:x -0.327685, :y 0.0279659} {:x -0.326757, :y 0.0265577} {:x -0.280813, :y 0.0260045} {:x -0.297785, :y 0.0295506} {:x -0.312564, :y 0.0304347} {:x -0.317533, :y 0.0303325} {:x -0.321177, :y 0.0296254} {:x -0.323518, :y 0.0282667} {:x -0.272843, :y 0.0288209} {:x -0.274491, :y 0.0302998} {:x -0.322369, :y 0.0217164} {:x -0.288172, :y 0.0115541} {:x -0.296262, :y 0.0115568} {:x -0.322501, :y 0.0052636} {:x -0.305425, :y 7.6804E-4} {:x -0.316764, :y 0.00413482} {:x -0.274089, :y -0.00480607} {:x -0.257578, :y -0.00245499} {:x -0.282008, :y 0.00106083} {:x -0.288967, :y 0.00200742} {:x -0.28478, :y -0.00334156} {:x -0.275783, :y 0.367386} {:x -0.301138, :y 0.356784} {:x -0.310964, :y 0.356871} {:x -0.384272, :y 0.468604} {:x -0.390101, :y 0.467641} {:x -0.33407, :y 0.40532} {:x -0.300333, :y 0.321363} {:x -0.351428, :y 0.304722} {:x -0.354093, :y 0.296547} {:x -0.360615, :y 0.275716} {:x -0.340192, :y 0.250219} {:x -0.304962, :y 0.287079} {:x -0.317302, :y 0.29115} {:x -0.331851, :y 0.281996} {:x -0.318604, :y 0.251696} {:x -0.348053, :y 0.253188} {:x -0.308039, :y 0.272841} {:x -0.366684, :y 0.263689} {:x -0.315379, :y 0.250967} {:x -0.317448, :y 0.243369} {:x -0.310384, :y 0.259641} {:x -0.284229, :y 0.295738} {:x -0.2712, :y 0.312676} {:x -0.34654, :y 0.328349} {:x -0.267162, :y 0.375578} {:x -0.341499, :y 0.345365} {:x -0.255401, :y 0.350383} {:x -0.23755, :y 0.371012} {:x -0.241394, :y 0.353391} {:x -0.23237, :y 0.371949} {:x -0.341886, :y 0.242657} {:x -0.361057, :y 0.248011} {:x -0.361509, :y 0.250545} {:x -0.328749, :y 0.237375} {:x -0.272052, :y 0.085337} {:x -0.290199, :y 0.0862778} {:x -0.313652, :y 0.0859621} {:x -0.317649, :y 0.084594} {:x -0.317808, :y 0.0841035} {:x -0.305574, :y 0.0891047} {:x -0.310559, :y 0.0869298} {:x -0.313466, :y 0.165205} {:x -0.310093, :y 0.166973} {:x -0.331324, :y 0.136557} {:x -0.32117, :y 0.103857} {:x -0.322527, :y 0.120746} {:x -0.303768, :y 0.100542} {:x -0.361287, :y 0.22508} {:x -0.331598, :y 0.223567} {:x -0.326689, :y 0.224313} {:x -0.310452, :y 0.16753} {:x -0.313955, :y 0.165975} {:x -0.3253, :y 0.139765} {:x -0.324087, :y 0.10274} {:x -0.32023, :y 0.0906437} {:x -0.320373, :y 0.215678} {:x -0.321961, :y 0.221878} {:x -0.323333, :y 0.221651} {:x -0.28775, :y 0.122833} {:x -0.32801, :y 0.118623} {:x -0.365839, :y 0.210333} {:x -0.373893, :y 0.228772} {:x -0.348314, :y 0.230062} {:x -0.342406, :y 0.230101} {:x -0.328296, :y 0.228225} {:x -0.331188, :y 0.198945} {:x -0.328391, :y 0.200536} {:x -0.323919, :y 0.20193} {:x -0.347438, :y 0.173025} {:x -0.348245, :y 0.172797} {:x -0.326405, :y 0.200574} {:x -0.276802, :y 0.0347616} {:x -0.294474, :y 0.026159} {:x -0.285725, :y 0.030593} {:x -0.318646, :y 0.0380644} {:x -0.320224, :y 0.0375594} {:x -0.305017, :y 0.0769166} {:x -0.293843, :y 0.0718708} {:x -0.275399, :y 0.0740705} {:x -0.276907, :y 0.0421774} {:x -0.313927, :y 0.075573} {:x -0.280595, :y 0.066844} {:x -0.271829, :y 0.0787027} {:x -0.316952, :y 0.0781205} {:x -0.306067, :y 0.0324528} {:x -0.272767, :y 0.0305051} {:x -0.272217, :y 0.0314082} {:x -0.28357, :y 0.0324344} {:x -0.272678, :y 0.030055} {:x -0.306924, :y 0.0196555} {:x -0.322358, :y 0.0217202} {:x -0.312705, :y 0.0297582} {:x -0.296281, :y 0.0115598} {:x -0.265004, :y 0.00377816} {:x -0.264381, :y 0.0087158} {:x -0.260803, :y 0.00734524} {:x -0.322593, :y 0.0199294} {:x -0.318054, :y 8.2994E-4} {:x -0.317598, :y 0.00104452} {:x -0.317426, :y -7.4606E-4} {:x -0.293565, :y -0.00250616} {:x -0.26696, :y -0.00476401} {:x -0.26642, :y -0.00279527} {:x -0.274437, :y -0.00462313} {:x -0.45569, :y 0.554201} {:x -0.39333, :y 0.61086} {:x -0.42794, :y 0.60938} {:x -0.441188, :y 0.600178} {:x -0.438358, :y 0.595136} {:x -0.441493, :y 0.600276} {:x -0.443949, :y 0.60513} {:x -0.420937, :y 0.579498} {:x -0.39336, :y 0.610877} {:x -0.470595, :y 0.584937} {:x -0.463784, :y 0.58075} {:x -0.454955, :y 0.591647} {:x -0.465904, :y 0.582366} {:x -0.439662, :y 0.561127} {:x -0.453866, :y 0.555003} {:x -0.473693, :y 0.57508} {:x -0.390986, :y 0.60064} {:x -0.415059, :y 0.580108} {:x -0.391642, :y 0.609907} {:x -0.420364, :y 0.582236} {:x -0.420832, :y 0.579508} {:x -0.424831, :y 0.578147} {:x -0.431728, :y 0.576604} {:x -0.45268, :y 0.59089} {:x -0.463591, :y 0.581355} {:x -0.442678, :y 0.563667} {:x -0.457046, :y 0.593151} {:x -0.463246, :y 0.58126} {:x -0.464623, :y 0.582533} {:x -0.466254, :y 0.527452} {:x -0.515184, :y 0.529812} {:x -0.506738, :y 0.527896} {:x -0.533818, :y 0.482163} {:x -0.521061, :y 0.508611} {:x -0.514557, :y 0.507106} {:x -0.481647, :y 0.498103} {:x -0.506453, :y 0.549179} {:x -0.492759, :y 0.564767} {:x -0.494709, :y 0.565733} {:x -0.463904, :y 0.527477} {:x -0.468223, :y 0.51436} {:x -0.517603, :y 0.481078} {:x -0.527776, :y 0.481968} {:x -0.495716, :y 0.545735} {:x -0.505756, :y 0.528287} {:x -0.466405, :y 0.531703} {:x -0.518191, :y 0.389191} {:x -0.481569, :y 0.421528} {:x -0.476596, :y 0.421282} {:x -0.47968, :y 0.341541} {:x -0.48261, :y 0.422231} {:x -0.491467, :y 0.449513} {:x -0.522819, :y 0.452353} {:x -0.521119, :y 0.390984} {:x -0.537841, :y 0.366256} {:x -0.513404, :y 0.351768} {:x -0.478056, :y 0.450406} {:x -0.514421, :y 0.453381} {:x -0.531552, :y 0.45323} {:x -0.52796, :y 0.306409} {:x -0.505693, :y 0.299487} {:x -0.488223, :y 0.277447} {:x -0.486362, :y 0.277386} {:x -0.532524, :y 0.30267} {:x -0.492629, :y 0.259863} {:x -0.500508, :y 0.26746} {:x -0.493804, :y 0.281729} {:x -0.531881, :y 0.253701} {:x -0.503945, :y 0.252883} {:x -0.513579, :y 0.24516} {:x -0.504268, :y 0.256242} {:x -0.534597, :y 0.234331} {:x -0.490281, :y 0.260825} {:x -0.520422, :y 0.240343} {:x -0.483031, :y 0.294592} {:x -0.538972, :y 0.327682} {:x -0.519301, :y 0.285156} {:x -0.497408, :y 0.280205} {:x -0.533791, :y 0.245619} {:x -0.509399, :y 0.247088} {:x -0.500562, :y 0.256883})}], :marks [{:type \"symbol\", :from {:data \"504e4fe1-2fae-4645-a611-f6558c7dfba9\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 10}, :stroke {:value \"transparent\"}}, :hover {:size {:value 30}, :stroke {:value \"white\"}}}}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"504e4fe1-2fae-4645-a611-f6558c7dfba9\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"504e4fe1-2fae-4645-a611-f6558c7dfba9\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}]}}"}
;; <=

;; **
;;; ## 2. Calculate distance matrix
;;; 
;;; Result will be:
;;; * distance matrix, called hiD-dist-matrix
;;; * get-distance method, which returns the distance between 2 given points
;; **

;; **
;;; #### Euclidean distance calculation
;; **

;; @@
(defn- sqr
  "Uses the numeric tower expt to square a number"
  [x]
  (math/expt x 2))

(defn euclidean-squared-distance
  "Computes the Euclidean squared distance between two sequences"
  [a b]
  (reduce + (map (comp sqr -) a b)))

(defn euclidean-distance
  "Computes the Euclidean distance between two sequences"
  [a b]
  (math/sqrt (euclidean-squared-distance a b)))

(defn euclidean-distance-row [a b]
  (vec (map #(round 3 (euclidean-distance b %)) a)))

(defn euclidean-distance-matrix [a]
  (vec (map #(euclidean-distance-row a %) a)))
;; @@

;; **
;;; #### Cosine distance calculation
;; **

;; @@
; (cosine-similarity [5 19] [7 -2])
; (cosine-similarity [5] [7])
(defn cosine-similarity [a b]
     (let [dot-product (->> (map * a b)
                            (apply +))
           magnitude (fn [d]
                       (->> (map ico/sq d)
                            (apply +)
                            (ico/sqrt)))]
       (round 3 (/ dot-product (* (magnitude a) (magnitude b))))))
(defn cosine-distance [a b]
	(round 3 (- 1 (cosine-similarity a b))))

(defn cosine-distance-row [a b]
  (vec (map #(round 3 (cosine-distance b %)) a)))

(defn cosine-distance-matrix [a]
  (vec (map #(cosine-distance-row a %) a)))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;stad/cosine-distance</span>","value":"#'stad/cosine-distance"}
;; <=

;; @@
;(def values (map #(vector (:x %) (:y %)) data))
;(def hiD-dist-matrix
;  ; hiD-dist-matrix only contains the distances; is an array of arrays
;  ; ([0.0 0.134 0.12 0.106 0.097 ...] [...])
;  (cosine-distance-matrix values))
;; @@

;; @@
(def values (map #(vector (:x %) (:y %) (:z %)) data))
(def hiD-dist-matrix
  (euclidean-distance-matrix values))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;stad/hiD-dist-matrix</span>","value":"#'stad/hiD-dist-matrix"}
;; <=

;; @@
(defn get-distance [x]
  (-> hiD-dist-matrix
      (nth (first x))
      (nth (second x))))

;(get-distance [0 7])
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;stad/get-distance</span>","value":"#'stad/get-distance"}
;; <=

;; @@
;(first hiD-dist-matrix)
;; @@

;; **
;;; ## 3. Create complete graph
;;; 
;;; Here we'll create the complete graph.
;; **

;; **
;;; Helper methods
;; **

;; @@
;;;;;

(defn get-all-edges [dist-matrix]
  ; Same as hiD-dist-matrix, but as array of arrays, including the node IDs
  ; e.g ([0 1 0.134] [0 2 0.12])
  ; Should *NOT* be used for getting the distance between 2 points. Easier to do that with the graph afterwards, e.g.
  ; (lg/weight full-graph 0 7)
  (for [from (range (count dist-matrix))
        to (range (+ from 1) (count dist-matrix))]
	[from to (get-distance [from to])]))

;;;;; Create tulip output files

(defn graph-to-csv-nodes [graph]
  (->>
    (lg/nodes graph)
    (map #(conj [] % % (:x (nth data %)) (:y (nth data %)) (:hue (nth data %))))))

;(defn graph-to-csv-edges [graph]
;  (->> (lg/edges graph)
;;       (map #(select-keys % [:src :dest]))
;;       (map vals)     ; ((0 7) (0 20) (0 27) (0 1) ... (7 0) (20 0) ...
;       (map sort)     ; ((0 7) (0 20) (0 27) (0 1) (0 24) ...
;       (set)
;       (map #(conj (vec %) (get-distance %)))))

(defn graph-to-csv-edges [graph]
  (->> (la/prim-mst-edges graph)
;       (filter #(< (first %) (second %)))
       (sort)))


(defn create-tulip-csv [graph prefix]
  (let [nodes-file (str "output/" prefix "_nodes.csv")
        edges-file (str "output/" prefix "_edges.csv")]
      (spit nodes-file "id,name,x,y,hue\n")
      (with-open [out-data (io/writer nodes-file :append true)]
        (csv/write-csv out-data (graph-to-csv-nodes graph)))
      (spit edges-file "source,target,weight\n")
      (with-open [out-data (io/writer edges-file :append true)]
        (csv/write-csv out-data (graph-to-csv-edges graph)))))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;stad/create-tulip-csv</span>","value":"#'stad/create-tulip-csv"}
;; <=

;; **
;;; Analysis
;; **

;; @@
(def all-edges (get-all-edges hiD-dist-matrix))
(take 5 all-edges)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"},{"type":"html","content":"<span class='clj-double'>0.011</span>","value":"0.011"}],"value":"[0 1 0.011]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-long'>2</span>","value":"2"},{"type":"html","content":"<span class='clj-double'>0.06</span>","value":"0.06"}],"value":"[0 2 0.06]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-long'>3</span>","value":"3"},{"type":"html","content":"<span class='clj-double'>0.147</span>","value":"0.147"}],"value":"[0 3 0.147]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-long'>4</span>","value":"4"},{"type":"html","content":"<span class='clj-double'>0.097</span>","value":"0.097"}],"value":"[0 4 0.097]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-long'>5</span>","value":"5"},{"type":"html","content":"<span class='clj-double'>0.105</span>","value":"0.105"}],"value":"[0 5 0.105]"}],"value":"([0 1 0.011] [0 2 0.06] [0 3 0.147] [0 4 0.097] [0 5 0.105])"}
;; <=

;; @@
(def full-graph
  (apply lg/weighted-graph all-edges))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;stad/full-graph</span>","value":"#'stad/full-graph"}
;; <=

;; **
;;; ## 4. Create the MST
;;; 
;;; Create the MST based on the full-graph. CAUTION: as this is an undirected graph, the edges might be present twice => need to use `mst-edges` instead of `(lg/edges mst)`
;; **

;; @@
(def mst (la/prim-mst full-graph))

;;; This does the same thing
;(def mst (apply lg/weighted-graph (la/prim-mst-edges full-graph)))
;; @@

;; @@
;(li/view mst)
;; @@

;; @@
(create-tulip-csv mst "mst")
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; **
;;; ## 5. Create ordered list from which to pick the next edge(s)
;;; 
;;; `non-mst` is an ordered list of edges (ordered based on distance from large to small) from which we'll pick the next edge to add.
;; **

;; @@
; non-mst-edges are all edges that are not in the mst

(def full-graph-unique-edges
  (->> (lg/edges full-graph)
;       (map #(select-keys % [:src :dest]))
;       (map vals)     ; ((0 7) (0 20) (0 27) (0 1) ... (7 0) (20 0) ...
       (map sort)     ; ((0 7) (0 20) (0 27) (0 1) (0 24) ...
       (set)))


(def mst-unique-edges
  (->> (lg/edges mst)
;       (map #(select-keys % [:src :dest]))
;       (map vals)     ; ((0 7) (0 20) (0 27) (0 1) ... (7 0) (20 0) ...
       (map sort)     ; ((0 7) (0 20) (0 27) (0 1) (0 24) ...
       (set)))

(def non-mst-edges
  (set/difference full-graph-unique-edges mst-unique-edges))

(def sorted-non-mst-edges
  (reverse (sort-by get-distance non-mst-edges)))

(def sorted-non-mst-edges-with-weight
  (map #(conj (vec %) (get-distance %)) sorted-non-mst-edges))


(first sorted-non-mst-edges-with-weight)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>0</span>","value":"0"},{"type":"html","content":"<span class='clj-long'>298</span>","value":"298"},{"type":"html","content":"<span class='clj-double'>0.794</span>","value":"0.794"}],"value":"[0 298 0.794]"}
;; <=

;; @@

;; @@

;; @@
(def g (apply lg/add-edges mst (take 2500 sorted-non-mst-edges-with-weight)))
(count (lg/edges mst))
(count (lg/edges g))

;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-unkown'>5694</span>","value":"5694"}
;; <=

;; @@
(create-tulip-csv g "g")
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; @@

;; @@

;; @@

;; @@

;; **
;;; ## 5. Calculate graph-dist-matrix
;; **

;; @@
(defn all-shortest-paths [g]
  (for [from (range (count a))
        to (range (+ from 1) (count a))]
	[from to (:cost (ua/shortest-path g from to))]))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;stad/all-shortest-paths</span>","value":"#'stad/all-shortest-paths"}
;; <=

;; @@
(defn get-graph-distance [g x]
  (->> (all-shortest-paths g)
       (filter #(= (first x) (first %)))
       (filter #(= (last x) (second %)))
       (first)
       (last)))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;stad/get-graph-distance</span>","value":"#'stad/get-graph-distance"}
;; <=

;; @@
(take 1 (all-shortest-paths mst))
(get-graph-distance mst [0 2])
(get-graph-distance mst [1 24])
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-long'>2</span>","value":"2"}
;; <=

;; @@

;; @@

;; @@

;; @@

;; **
;;; ## Compare hiD-dist-matrix to graph-dist-matrix
;; **

;; @@
;(map last (all-shortest-paths mst))
;; @@

;; @@
;(map last all-edges)
;; @@

;; @@
(is/correlation (flatten hiD-dist-matrix) (flatten graph-dist-matrix))
;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; **
;;; ## 6. Compare graph-dist-matrix to hiD-dist-matrix
;; **

;; @@
(is/correlation (map last (all-shortest-paths mst)) (map last all-edges))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-double'>-0.2735345162303523</span>","value":"-0.2735345162303523"}
;; <=

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@

;; @@
